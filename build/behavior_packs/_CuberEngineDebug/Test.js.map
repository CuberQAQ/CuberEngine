{"version":3,"sources":["Test.ts"],"names":[],"mappings":"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","file":"../CuberEngine/scripts/Test.js","sourcesContent":["import { Player, world, system } from \"@minecraft/server\";\r\nimport { ActionFormData, MessageFormData } from \"@minecraft/server-ui\";\r\nimport {\r\n  anaylseError,\r\n  delayBox,\r\n  isAdmin,\r\n  permissionStrTest,\r\n  tellErrorMessage,\r\n  tellMessage,\r\n  tellSuccessMessage,\r\n  test,\r\n} from \"./utils\";\r\nimport { http, HttpClient, HttpRequest, HttpResponse, HttpHeader, HttpRequestMethod } from \"@minecraft/server-net\";\r\nimport * as fs from \"graceful-fs\";\r\nimport { SecretString, secrets } from \"@minecraft/server-admin\";\r\nimport { backupInfo, data, reloadData, saveData, sudo } from \"./Data\";\r\nimport { clearEntity } from \"./ServerManage\";\r\nconst overworld = world.getDimension(\"overworld\");\r\nconst nether = world.getDimension(\"nether\");\r\nconst the_end = world.getDimension(\"the_end\");\r\nconst moduleName = \"§b§l服务姬\";\r\nconst moduleVersion = \"1.0.0\";\r\nconst testJson = {\r\n  snow: {\r\n    lists: [\r\n      {\r\n        name: \"transport\",\r\n      },\r\n    ],\r\n  },\r\n};\r\nconst fileName = \"test.json\";\r\nfunction initTest() {\r\n  world.beforeEvents.chatSend.subscribe(async (e) => {\r\n    await delayBox(async () => {\r\n      try {\r\n        if (e.message.startsWith(\"＃\") || e.message.startsWith(\"♯\")) {\r\n          tellErrorMessage(\"§b§l服务姬\", \"请使用§l英文输入法§r§c输入井号\");\r\n        } else if (/^#cuber /.test(e.message)) {\r\n          if (isAdmin(e.sender.name)) {\r\n            if (/^#cuber net/.test(e.message)) {\r\n              tellMessage(moduleName, \"Net Test Start\");\r\n              let req = new HttpRequest(\"http://localhost:25641/data.json\");\r\n              req.setMethod(HttpRequestMethod.Get);\r\n              req.addHeader(\"reload\", \"true\");\r\n              req.setTimeout(60);\r\n              http.request(req).then(\r\n                (response) => {\r\n                  if (response.status == 200) {\r\n                    tellSuccessMessage(\r\n                      moduleName,\r\n                      \"Net Test Succeeded. [\" +\r\n                        response.status +\r\n                        \"] \\n§r\" +\r\n                        \"BODY: \" +\r\n                        response.body +\r\n                        \"\\nBODY(Decoded): \" +\r\n                        decodeURIComponent(response.body)\r\n                    );\r\n                  } else {\r\n                    tellErrorMessage(moduleName, \"Net Test Failed. [\" + response.status + \"]\");\r\n                  }\r\n                },\r\n                () => {\r\n                  tellErrorMessage(moduleName, \"Net Test Failed. [PROMIST_FAILURE]\");\r\n                }\r\n              );\r\n            } else if (/^#cuber save/.test(e.message)) {\r\n              tellMessage(moduleName, \"Net Test Save\");\r\n              let request = new HttpRequest(\"http://localhost:25641/data.json\");\r\n              request.setMethod(HttpRequestMethod.Post);\r\n              request.addHeader(\"upgrade\", \"save\");\r\n              request.addHeader(\"Content-Type\", \"application/json; charset=utf-8\");\r\n              request.addHeader(\"cookie\", encodeURIComponent(e.message.replace(/^#cuber save/, \"\")));\r\n              request.setTimeout(60);\r\n              http.request(request).then(\r\n                (response) => {\r\n                  test(() => {\r\n                    if (response.status == 200) {\r\n                      tellSuccessMessage(\r\n                        moduleName,\r\n                        \"Data Save Succeeded. [\" + response.status + \"]: §r\" + response.body\r\n                      );\r\n                    } else {\r\n                      tellErrorMessage(moduleName, \"Data Save Failed. [\" + response.status + \"]\");\r\n                    }\r\n                  }, moduleName);\r\n                },\r\n                () => {\r\n                  tellErrorMessage(moduleName, \"Data Save Failed. [PROMISE_FAILURE]\");\r\n                }\r\n              );\r\n            } else if (/^#cuber send/.test(e.message)) {\r\n              tellMessage(moduleName, \"Net Test Send\");\r\n              let request = new HttpRequest(\"http://localhost:25641/ring\");\r\n              request.addHeader(\"cookie\", encodeURIComponent(e.message.replace(/^#cuber send/, \"\")));\r\n              request.setTimeout(60);\r\n              request.setMethod(HttpRequestMethod.Post);\r\n              http.request(request).then(\r\n                (response) => {\r\n                  test(() => {\r\n                    if (response.status == 200) {\r\n                      tellSuccessMessage(\r\n                        moduleName,\r\n                        \"Net Send Succeeded. [\" + response.status + \"]: §r\" + decodeURIComponent(response.body)\r\n                      );\r\n                    } else {\r\n                      tellErrorMessage(moduleName, \"Net Send Failed. [\" + response.status + \"]\");\r\n                    }\r\n                  }, moduleName);\r\n                },\r\n                () => {\r\n                  tellErrorMessage(moduleName, \"Net Send Failed. [PROMISE_FAILURE]\");\r\n                }\r\n              );\r\n            } else if (/^#cuber reload/.test(e.message)) {\r\n              reloadData();\r\n            } else if (/^#cuber backupInfo/.test(e.message)) {\r\n              tellMessage(\"BackupInfo\", JSON.stringify(backupInfo));\r\n            } else if (/^#cuber flyable/.test(e.message)) {\r\n              tellMessage(moduleName, \"@\" + e.sender.name + \" Can Fly: \" + e.sender.hasComponent(\"minecraft:can_fly\"));\r\n            } else if (/^#cuber spectator/.test(e.message)) {\r\n              tellMessage(\r\n                moduleName,\r\n                \"successCount=\" + (await e.sender.runCommandAsync(\"testfor @s[m=spectator]\")).successCount\r\n              );\r\n            } else if (/^#cuber tickTest1/.test(e.message)) {\r\n              for (let i = 0; i < 100; ++i) {\r\n                await overworld.runCommandAsync('scoreboard players add \"测试\" test 1');\r\n              }\r\n            } else if (/^#cuber sweep/.test(e.message)) {\r\n              tellMessage(\"§b§l扫地姬\", \"§e@\" + e.sender.name + \"§r 喊我扫地啦！\");\r\n              data.settings.entity_clear.config.forEach((config: any) => {\r\n                if (!config.enable) return;\r\n                clearEntity(config);\r\n              });\r\n              return false;\r\n            } else if (/^#cuber killpig/.test(e.message)) {\r\n              tellMessage(\r\n                moduleName,\r\n                \"successCount=\" + (await overworld.runCommandAsync(\"kill @e[type=pig]\")).successCount\r\n              );\r\n            } else {\r\n              tellErrorMessage(moduleName, \"Admin Test Command Undefined\");\r\n            }\r\n          } else {\r\n            tellErrorMessage(moduleName, \"Refuse to Run Admin Test Command\");\r\n          }\r\n        } else if (e.message.startsWith(\"#snow\")) {\r\n          e.sender.runCommandAsync(\"give @s snowball 16\");\r\n        } else if (e.message.trim() == \"#op\") {\r\n          if (e.sender.hasTag(\"op\")) {\r\n            tellMessage(\"§b§l服务姬\", \"赋予 §e§l@\" + e.sender.name + \" §r操作员权限！\");\r\n            sudo(\"op \" + e.sender.name, e.sender.name);\r\n          } else {\r\n            tellMessage(\"§b§l服务姬\", \"@\" + e.sender.name + \" §r权限不足，无法获取§c§l操作员权限§r！\");\r\n          }\r\n        } else if (e.message.trim() == \"#deop\") {\r\n          if (e.sender.hasTag(\"op\")) {\r\n            tellMessage(\"§b§l服务姬\", \"夺去 §e§l@\" + e.sender.name + \" §r操作员权限！\");\r\n            sudo(\"deop \" + e.sender.name, e.sender.name);\r\n          } else {\r\n            tellMessage(\"§b§l服务姬\", \"@\" + e.sender.name + \" §r权限不足，无法执行此命令！\");\r\n          }\r\n        } else if (e.message.startsWith(\"#sudo\")) {\r\n          if (isAdmin(e.sender.name)) {\r\n            let command = e.message.replace(/^#sudo/, \"\").trim();\r\n            tellMessage(\"§c§lSudo\", \"§e§l@\" + e.sender.name + \" §r运行服务端命令： \" + command);\r\n            sudo(command, e.sender.name);\r\n          } else {\r\n            tellErrorMessage(moduleName, \"Refuse to Run SuperUser Command\");\r\n          }\r\n        } else if (e.message.trim() == \"#reload\") {\r\n          if (e.sender.hasTag(\"op\")) {\r\n            tellMessage(\"§b§l服务姬\", \"正在重载插件...\");\r\n            sudo(\"reload\", e.sender.name);\r\n          } else {\r\n            tellErrorMessage(moduleName, \"非管理员无法执行此命令\");\r\n          }\r\n        } else if (e.message.trim() == \"#home\") {\r\n          if (data.players[e.sender.name].home_spot == undefined) {\r\n            tellMessage(\"§b§l系统\", \"§e§l@\" + e.sender.name + \" §r你还§c没有设置个人传送点§r，试试#sethome吧\");\r\n          } else {\r\n            tellMessage(\"§b§l系统\", \"§e§l@\" + e.sender.name + \" §r传送到了 §a§l个人传送点\");\r\n            // e.sender.teleport(\r\n            //   { ...data.players[e.sender.name].home_spot },\r\n            //   {\r\n            //     dimension: world.getDimension(data.players[e.sender.name].home_spot.dimension),\r\n            //     rotation: {\r\n            //       x: 0,\r\n            //       y: 0,\r\n            //     },\r\n            //   }\r\n            // );\r\n            e.sender.runCommandAsync(\r\n              \"execute in \" +\r\n                data.players[e.sender.name].home_spot.dimension +\r\n                \" run tp \" +\r\n                data.players[e.sender.name].home_spot.x +\r\n                \" \" +\r\n                data.players[e.sender.name].home_spot.y +\r\n                \" \" +\r\n                data.players[e.sender.name].home_spot.z +\r\n                \" 0 0\"\r\n            );\r\n          }\r\n        } else if (e.message.trim() == \"#sethome\") {\r\n          let dimension = \"overworld\";\r\n          switch (e.sender.dimension) {\r\n            case overworld:\r\n              dimension = \"overworld\";\r\n              break;\r\n            case the_end:\r\n              dimension = \"the_end\";\r\n              break;\r\n            case nether:\r\n              dimension = \"nether\";\r\n              break;\r\n          }\r\n          data.players[e.sender.name].home_spot = { ...e.sender.location, dimension };\r\n          tellMessage(\"§b§l系统\", \"§e§l@\" + e.sender.name + \" §r个人传送点 §a§l设置成功\");\r\n          saveData(\"@\" + e.sender.name + \" #sethome\");\r\n        } else if (/^#permission/.test(e.message)) {\r\n          let target = e.message.replace(/^#permission (\\w*) .*/, \"$1\"),\r\n            perStr = e.message.replace(/^#permission \\w* (.*)/, \"$1\").trim();\r\n          tellMessage(\r\n            moduleName,\r\n            \"Test [@\" + target + \"] permission [\" + perStr + \"], result:\" + permissionStrTest(target, perStr)\r\n          );\r\n        }\r\n      } catch (e) {\r\n        anaylseError(moduleName, e, \"In beforeChat subscribe\");\r\n      }\r\n    });\r\n  });\r\n  return { moduleName, moduleVersion };\r\n}\r\n\r\nexport { initTest };\r\n"],"sourceRoot":"../../../scripts/"}
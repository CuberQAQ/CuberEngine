{"version":3,"sources":["CuberSnow.ts"],"names":[],"mappings":"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","file":"../CuberEngine/scripts/CuberSnow.js","sourcesContent":["// CuberSnow for Minecraft Bedrock Edition\r\n// Author: CuberQAQ <https://github.com/CuberQAQ>\r\n// Liscence: GPLv3 https://www.gnu.org/licenses/gpl-3.0.html\r\n// Based on GameTest Framework (https://learn.microsoft.com/zh-cn/minecraft/creator/scriptapi/)\r\n// Version: 3.0.0\r\n\r\n// Copyright CuberQAQ. All rights reserved.\r\n\r\nimport { Player, Vector3, world } from \"@minecraft/server\";\r\nimport { ActionFormData, MessageFormData, MessageFormResponse, ModalFormData } from \"@minecraft/server-ui\";\r\nimport { anaylseError, getDate, getPlayerScore, isAdmin, tellErrorMessage, tellMessage } from \"./utils\";\r\nimport {\r\n  backup,\r\n  backupInfo,\r\n  data,\r\n  delBackup,\r\n  reloadBackupInfo,\r\n  reloadData,\r\n  restore,\r\n  saveBackupInfo,\r\n  saveData,\r\n} from \"./Data\";\r\nimport { clearEntity } from \"./ServerManage\";\r\n// import { mkdir } from \"fs-extra\";\r\nconst overworld = world.getDimension(\"overworld\");\r\nconst moduleName = \"CuberSnow\";\r\nconst moduleVersion = \"3.1.0\";\r\nconst senderName = \"§b§l雪球菜单\";\r\n\r\n// 类型声明\r\ninterface SnowScriptList {\r\n  [index: string]: (player: Player, list_key: string) => Promise<boolean>;\r\n}\r\ninterface StrScriptList {\r\n  [index: string]: (player: Player, list_key: string) => Promise<string>;\r\n}\r\ninterface SnowItem {\r\n  name: string;\r\n  type: \"tp\" | \"commands\" | \"function\" | \"script\" | \"route\" | \"null\";\r\n  tag?: [] | Array<string>;\r\n  icon?: string; // PNG path in textures/blocks/ without \".png\"\r\n  // Properties of tp\r\n  location?: { x: number; y: number; z: number };\r\n  show?: boolean;\r\n  show_name?: string;\r\n  dimension?: \"overworld\" | \"the_end\" | \"nether\";\r\n  // Properties of commands,\r\n  commands?: Array<string>;\r\n  close?: boolean;\r\n  // Properties of function,\r\n  // TODO\r\n  // Properties of script,\r\n  script?: string;\r\n  // Properties of route,\r\n  destination?: string;\r\n}\r\ninterface SnowList {\r\n  name: string;\r\n  title: string;\r\n  show_back: boolean;\r\n  lock?: boolean;\r\n  list: Array<SnowItem>;\r\n  body: string;\r\n}\r\ninterface PlayerData {\r\n  job?: string;\r\n  goodat?: string;\r\n  money?: number;\r\n  place?: string;\r\n  online_time?: number;\r\n  last_login?: number; // UTC ms\r\n  last_checkin?: number; // YYYYMMDD\r\n  checkin_times?: number;\r\n}\r\ninterface SnowListData {\r\n  snow_list: SnowList;\r\n  key: string;\r\n}\r\ninterface SpecialRouteType {\r\n  [index: string]: string;\r\n}\r\ninterface EntityClearConfigListType {\r\n  name: string;\r\n  types: Array<[string, boolean, string?]>;\r\n}\r\ninterface EntityClearConfigType {\r\n  name: string;\r\n  show: string;\r\n  display: boolean;\r\n  enable: boolean;\r\n  time: number;\r\n  last_clear: number;\r\n  forecasted: boolean;\r\n  forecast: boolean;\r\n  foretime: number;\r\n  list: Array<EntityClearConfigListType>;\r\n}\r\ninterface BackupInfoType {\r\n  path: string;\r\n  append: string;\r\n  creater: string;\r\n  auto: boolean;\r\n}\r\ntype RunBeforeTpFuncType = (\r\n  player: Player,\r\n  list_key: string\r\n) => { cancel: boolean; cancelReason?: string } | Promise<{ cancel: boolean; cancelReason?: string }>;\r\ninterface RunBeforeTpType {\r\n  [index: string]: RunBeforeTpFuncType; // 是否退出\r\n}\r\nconst snowScripts: SnowScriptList = {\r\n  test: async function (player, list_key) {\r\n    tellMessage(moduleName, \"Script Test.\");\r\n    return true;\r\n  },\r\n  enterAdminOptions: async function (player, list_key) {\r\n    if (!isAdmin(player.nameTag)) {\r\n      // 非管理员\r\n      let msfrNotAdmin = await new MessageFormData()\r\n        .title(\"提示\")\r\n        .body(\"暂未获得管理员权限\\n如有疑问请联系CuberQAQ或其他管理员\")\r\n        .button1(\"返回上一级\")\r\n        .button2(\"退出菜单\")\r\n        .show(player);\r\n      if (msfrNotAdmin.selection == 2 || msfrNotAdmin.canceled) return true;\r\n      return false;\r\n    } else return showSnowList(player, \"admin\");\r\n  },\r\n  admin_snow_editItem: async function (player, list_key) {\r\n    while (true) {\r\n      // 定义选择选项用的函数(列出所有菜单，让人选)\r\n      async function chooseListFromAll(operation_name: string): Promise<string | undefined> {\r\n        // 选择列表\r\n        let afdChooseList = new ActionFormData().title(\"请选择\" + operation_name + \"选项所在列表\");\r\n        let keyList = [];\r\n        for (let item in data.snow) {\r\n          if (data.snow[item].lock == undefined || data.snow[item].lock == false) {\r\n            keyList.push(item);\r\n            afdChooseList = afdChooseList.button(data.snow[item].name);\r\n          }\r\n        }\r\n        let afrChooseList = await afdChooseList.show(player);\r\n        if (afrChooseList.canceled || afrChooseList.selection == undefined) return undefined;\r\n        return keyList[afrChooseList.selection];\r\n      }\r\n      // 定义选择选项用的函数(通过进入主界面选择) 【未完成】\r\n      async function chooseListFromTree(operation_name: string): Promise<string | undefined> {\r\n        // 选择列表\r\n        let afdChooseList = new ActionFormData().title(\"请选择\" + operation_name + \"选项所在列表\");\r\n        let keyList = [];\r\n        for (let item in data.snow) {\r\n          if (data.snow[item].lock == undefined || data.snow[item].lock == false) {\r\n            keyList.push(item);\r\n            afdChooseList = afdChooseList.button(data.snow[item].name);\r\n          }\r\n        }\r\n        let afrChooseList = await afdChooseList.show(player);\r\n        if (afrChooseList.canceled || afrChooseList.selection == undefined) return undefined;\r\n        return keyList[afrChooseList.selection];\r\n      }\r\n      // 定义选择选项用的函数\r\n      async function chooseItem(targetListObj: any, operation_name: string): Promise<number | undefined> {\r\n        if (!targetListObj || !(targetListObj.list instanceof Array)) {\r\n          throw new Error(\"Strange targetListObj in [chooseItem]\");\r\n        }\r\n        // 选择选项\r\n        let afdChooseItem = new ActionFormData().title(\"编辑菜单 -\" + targetListObj.name).body(\"\" + operation_name);\r\n        let length = targetListObj.list.length;\r\n        for (let i = 0; i < length; ++i) {\r\n          afdChooseItem = afdChooseItem.button(\r\n            targetListObj.list[i].name,\r\n            (targetListObj.list[i].icon ?? \"\") != \"\" ? \"textures/blocks/\" + targetListObj.list[i].icon : undefined\r\n          );\r\n        }\r\n        let afrChooseItem = await afdChooseItem.show(player);\r\n        // 若退出\r\n        if (afrChooseItem.canceled || afrChooseItem.selection == undefined) {\r\n          return undefined;\r\n        }\r\n        return afrChooseItem.selection;\r\n      }\r\n      // 定义编辑或者添加菜单用的函数\r\n      async function editItem(operation_name: string, raw_data?: SnowItem): Promise<SnowItem | undefined> {\r\n        // 选项的编辑界面\r\n        // 子界面1 name tag type\r\n        let resultItem: SnowItem = {\r\n          name: \"\",\r\n          type: \"tp\",\r\n        };\r\n        // 未指定则提供简单模板\r\n        if (raw_data == undefined)\r\n          raw_data = {\r\n            name: \"\",\r\n            type: \"null\",\r\n          };\r\n\r\n        while (true) {\r\n          let afrItemEditor1 = await new ModalFormData()\r\n            .title(\"\" + operation_name + \"选项\")\r\n            .textField(\r\n              \"§l显示名称§r\\n可用双S符号调色，\\\\n换行。最多两行，每行最多约16个汉字(32个字母)\",\r\n              \"输入显示名称\",\r\n              raw_data?.name\r\n            )\r\n            .textField(\r\n              \"权限标签(拥有标签才可以执行选项)\",\r\n              '多个标签请用英文逗号\",\"隔开',\r\n              raw_data?.tag?.length\r\n                ? (() => {\r\n                    let result = \"\";\r\n                    let length = raw_data.tag.length;\r\n                    for (let i = 0; i < length; ++i) {\r\n                      result += raw_data.tag[i];\r\n                      if (i != length - 1) result += \",\";\r\n                    }\r\n                    return result;\r\n                  })()\r\n                : undefined\r\n            )\r\n            .dropdown(\r\n              \"选项类型\",\r\n              [\"传送(tp)\", \"命令(commands)\", \"函数(function)\", \"菜单跳转(route)\", \"脚本(script)\"],\r\n              (() => {\r\n                switch (raw_data?.type) {\r\n                  case \"tp\":\r\n                    return 0;\r\n                  case \"commands\":\r\n                    return 1;\r\n                  case \"function\":\r\n                    return 2;\r\n                  case \"route\":\r\n                    return 3;\r\n                  case \"script\":\r\n                    return 4;\r\n                  default:\r\n                    return 0;\r\n                }\r\n              })()\r\n            )\r\n            .textField(\"图标位置(资源包 textures/blocks/ 下不含后缀的PNG图片名)\", \"留空为无图标\", raw_data.icon)\r\n            .show(player);\r\n          if (afrItemEditor1.canceled || afrItemEditor1.formValues == undefined) {\r\n            return undefined;\r\n          }\r\n          if (afrItemEditor1.formValues[0] == \"\") {\r\n            let msfr = await new MessageFormData()\r\n              .title(\"错误\")\r\n              .body(\"选项名字不可为空\")\r\n              .button1(\"确定\")\r\n              .button2(\"退出\")\r\n              .show(player);\r\n            if (msfr.canceled || msfr.selection == 2) {\r\n              return undefined;\r\n            }\r\n            continue;\r\n          }\r\n          resultItem.name = afrItemEditor1.formValues[0].replace(/\\\\n/g, \"\\n\");\r\n          let tagList: Array<string> =\r\n            afrItemEditor1.formValues[1].replace(/ /g, \"\").replace(/,$/, \"\").split(\",\") ?? [];\r\n          if (tagList.length == 1 && tagList[0] == \"\") {\r\n            tagList = [];\r\n          }\r\n          resultItem.tag = tagList;\r\n          switch (afrItemEditor1.formValues[2]) {\r\n            case 0:\r\n              resultItem.type = \"tp\";\r\n              break;\r\n            case 1:\r\n              resultItem.type = \"commands\";\r\n              break;\r\n            case 2:\r\n              resultItem.type = \"function\";\r\n              break;\r\n            case 3:\r\n              resultItem.type = \"route\";\r\n              break;\r\n            case 4:\r\n              resultItem.type = \"script\";\r\n              break;\r\n            default:\r\n              throw new Error(\"[Admin] afrItemEditor1.formValues[2] ERROR @\" + player.name);\r\n              return;\r\n          }\r\n          // icon\r\n          if (afrItemEditor1.formValues[3].trim() != \"\") {\r\n            resultItem.icon = afrItemEditor1.formValues[3].trim();\r\n          }\r\n          break;\r\n        }\r\n        while (true) {\r\n          switch (resultItem.type) {\r\n            case \"tp\":\r\n              {\r\n                let afrItemEditor2 = await new ModalFormData()\r\n                  .title(\"\" + operation_name + \"选项\")\r\n                  .textField(\r\n                    \"§l传送点名称(传送后在聊天栏中显示)\",\r\n                    \"输入传送点名称，不输默认为选项名称\",\r\n                    raw_data.show_name\r\n                  )\r\n                  .textField(\"§l传送点X坐标\", \"X坐标\", \"\" + (raw_data?.type == \"tp\" ? raw_data.location?.x : \"\"))\r\n                  .textField(\"§l传送点Y坐标\", \"Y坐标\", \"\" + (raw_data?.type == \"tp\" ? raw_data.location?.y : \"\"))\r\n                  .textField(\"§l传送点Z坐标\", \"Z坐标\", \"\" + (raw_data?.type == \"tp\" ? raw_data.location?.z : \"\"))\r\n                  .dropdown(\r\n                    \"目的地维度\",\r\n                    [\"主世界(overworld)\", \"末地(the_end)\", \"下界(nether)\"],\r\n                    (() => {\r\n                      if (raw_data.type == \"tp\") {\r\n                        switch (raw_data.dimension) {\r\n                          case \"overworld\":\r\n                            return 0;\r\n                          case \"the_end\":\r\n                            return 1;\r\n                          case \"nether\":\r\n                            return 2;\r\n                          default:\r\n                            return 0;\r\n                        }\r\n                      } else {\r\n                        return 0;\r\n                      }\r\n                    })()\r\n                  )\r\n                  .toggle(\"传送信息公开显示\", raw_data.type == \"tp\" ? raw_data.show : true)\r\n                  .show(player);\r\n                if (afrItemEditor2.canceled || afrItemEditor2.formValues == undefined) {\r\n                  return undefined;\r\n                }\r\n                if (\r\n                  // 若坐标为空\r\n                  afrItemEditor2.formValues[1].trim() == \"\" ||\r\n                  afrItemEditor2.formValues[2].trim() == \"\" ||\r\n                  afrItemEditor2.formValues[3].trim() == \"\"\r\n                ) {\r\n                  let msfr = await new MessageFormData()\r\n                    .title(\"错误\")\r\n                    .body(\"传送点坐标不可为空\")\r\n                    .button1(\"确定\")\r\n                    .button2(\"退出\")\r\n                    .show(player);\r\n                  if (msfr.canceled || msfr.selection == 2) {\r\n                    return undefined;\r\n                  }\r\n                  continue;\r\n                }\r\n                if (\r\n                  // 若坐标不为纯数字\r\n                  isNaN(Number(afrItemEditor2.formValues[1])) ||\r\n                  isNaN(Number(afrItemEditor2.formValues[2])) ||\r\n                  isNaN(Number(afrItemEditor2.formValues[3]))\r\n                ) {\r\n                  let msfr = await new MessageFormData()\r\n                    .title(\"错误\")\r\n                    .body(\"传送点坐标必须为数字\")\r\n                    .button1(\"确定\")\r\n                    .button2(\"退出\")\r\n                    .show(player);\r\n                  if (msfr.canceled || msfr.selection == 2) {\r\n                    return;\r\n                  }\r\n                  continue;\r\n                }\r\n                if (afrItemEditor2.formValues[0].trim() != \"\") {\r\n                  resultItem.show_name = afrItemEditor2.formValues[0].trim();\r\n                }\r\n                resultItem.location = {\r\n                  x: Number(afrItemEditor2.formValues[1]),\r\n                  y: Number(afrItemEditor2.formValues[2]),\r\n                  z: Number(afrItemEditor2.formValues[3]),\r\n                };\r\n                switch (afrItemEditor2.formValues[4]) {\r\n                  case 0:\r\n                    resultItem.dimension = \"overworld\";\r\n                    break;\r\n                  case 1:\r\n                    resultItem.dimension = \"the_end\";\r\n                    break;\r\n                  case 2:\r\n                    resultItem.dimension = \"nether\";\r\n                    break;\r\n                  default:\r\n                    tellErrorMessage(moduleName, \"[Admin] afrItemEditor2.formValues[3] ERROR @\" + player.name);\r\n                    return undefined;\r\n                }\r\n                resultItem.show = afrItemEditor2.formValues[5];\r\n              }\r\n              break;\r\n            case \"commands\":\r\n              {\r\n                let afrItemEditor2 = await new ModalFormData()\r\n                  .title(\"\" + operation_name + \"选项\")\r\n                  .textField(\r\n                    '§l执行指令§r§o\\n指令前不加\"/\"，多条指令用\\\\s分割',\r\n                    \"输入指令\",\r\n                    \"\" +\r\n                      (raw_data?.type == \"commands\"\r\n                        ? (() => {\r\n                            if (raw_data.commands == undefined) return \"\";\r\n                            let str = \"\";\r\n                            let length = raw_data.commands.length;\r\n                            for (let i = 0; i < length; ++i) {\r\n                              str += raw_data.commands[i].trim();\r\n                              if (i != length - 1) str += \" \\\\s \";\r\n                            }\r\n                            return str;\r\n                          })()\r\n                        : \"\")\r\n                  )\r\n                  .toggle(\"执行后退出菜单\", raw_data.type == \"commands\" ? raw_data.close ?? true : true)\r\n                  .show(player);\r\n                if (afrItemEditor2.formValues == undefined || afrItemEditor2.canceled) {\r\n                  return undefined;\r\n                }\r\n                // 若指令为空\r\n                if (afrItemEditor2.formValues[0].trim() == \"\") {\r\n                  let msfr = await new MessageFormData()\r\n                    .title(\"错误\")\r\n                    .body(\"指令不可为空\")\r\n                    .button1(\"确定\")\r\n                    .button2(\"退出\")\r\n                    .show(player);\r\n                  if (msfr.canceled || msfr.selection == 2) {\r\n                    return undefined;\r\n                  }\r\n                  continue;\r\n                }\r\n                // 分割\r\n                let cmdList: Array<string> = afrItemEditor2.formValues[0].trim().split(\"\\\\s\");\r\n\r\n                // 去除空格和空指令\r\n                let length = cmdList.length;\r\n                for (let i = 0; i < length; ++i) {\r\n                  cmdList[i] = cmdList[i].trim();\r\n                  if (cmdList[i] == \"\") {\r\n                    cmdList.splice(i, 1);\r\n                    --i;\r\n                    --length;\r\n                  }\r\n                }\r\n                // 若处理后指令为空\r\n                if (length == 0) {\r\n                  let msfr = await new MessageFormData()\r\n                    .title(\"错误\")\r\n                    .body(\"请输入有效的指令\")\r\n                    .button1(\"确定\")\r\n                    .button2(\"退出\")\r\n                    .show(player);\r\n                  if (msfr.canceled || msfr.selection == 2) {\r\n                    return undefined;\r\n                  }\r\n                  continue;\r\n                }\r\n                // 保存！\r\n                resultItem.commands = cmdList;\r\n                resultItem.close = afrItemEditor2.formValues[1] ?? true;\r\n              }\r\n              break;\r\n            case \"function\":\r\n              {\r\n                let msfr = await new MessageFormData()\r\n                  .title(\"错误\")\r\n                  .body(\"function 将在未来支持(反正没人用)\")\r\n                  .button1(\"确定\")\r\n                  .button2(\"退出\")\r\n                  .show(player);\r\n                return undefined;\r\n              }\r\n              break;\r\n            case \"route\":\r\n              {\r\n                // 选择方式\r\n                let afdItemEditor2 = new ActionFormData()\r\n                  .title(\"\" + operation_name + \"选项\")\r\n                  .body(\"通过何种方式选择跳转目标菜单？\\n \\n \")\r\n                  .button(\"目标菜单列表\")\r\n                  .button(\"直接输入键名\")\r\n                  .button(\"创建特殊跳转选项\");\r\n                if (raw_data.type == \"route\") {\r\n                  afdItemEditor2 = afdItemEditor2.button(\"保持原有设置\");\r\n                }\r\n                let afrItemEditor2 = await afdItemEditor2.show(player);\r\n                if (afrItemEditor2.selection == undefined || afrItemEditor2.canceled) {\r\n                  return undefined;\r\n                }\r\n                // 通过不同方式选择目标菜单\r\n                switch (afrItemEditor2.selection) {\r\n                  case 0: // 目标菜单列表\r\n                    {\r\n                      let destination = await chooseListFromAll(\"跳转\");\r\n                      if (destination == undefined || destination == \"\") return undefined;\r\n                      resultItem.destination = destination;\r\n                    }\r\n                    break;\r\n                  case 1: // 直接输入键名\r\n                    {\r\n                      let afrItemEditor2 = await new ModalFormData()\r\n                        .title(\"\" + operation_name + \"选项\")\r\n                        .textField(\r\n                          \"输入目标跳转菜单的键名\",\r\n                          \"输入键名\",\r\n                          \"\" + (raw_data?.type == \"route\" ? raw_data.destination ?? \"\" : \"\")\r\n                        )\r\n                        .toggle(\"检查是否存在\", true)\r\n                        .show(player);\r\n                      if (afrItemEditor2.formValues == undefined || afrItemEditor2.canceled) {\r\n                        return undefined;\r\n                      }\r\n                      if (afrItemEditor2.formValues[0] == undefined || afrItemEditor2.formValues[0].trim() == \"\") {\r\n                        let msfr = await new MessageFormData()\r\n                          .title(\"错误\")\r\n                          .body(\"目标菜单键名不可为空\")\r\n                          .button1(\"确定\")\r\n                          .button2(\"退出\")\r\n                          .show(player);\r\n                        if (msfr.canceled || msfr.selection == 2) {\r\n                          return undefined;\r\n                        }\r\n                        continue;\r\n                      }\r\n                      // 检查是否存在\r\n                      if (afrItemEditor2.formValues[1] == true) {\r\n                        if (!data.snow[afrItemEditor2.formValues[0]]) {\r\n                          let msfr = await new MessageFormData()\r\n                            .title(\"错误\")\r\n                            .body(\"目标菜单不存在\")\r\n                            .button1(\"确定\")\r\n                            .button2(\"退出\")\r\n                            .show(player);\r\n                          if (msfr.canceled || msfr.selection == 2) {\r\n                            return undefined;\r\n                          }\r\n                          continue;\r\n                        }\r\n                      }\r\n                      // 保存\r\n                      resultItem.destination = afrItemEditor2.formValues[0].trim();\r\n                    }\r\n                    break;\r\n                  case 2: // 创建特殊跳转选项\r\n                    {\r\n                      // 选择方式\r\n                      let afrItemEditor2 = await new ActionFormData()\r\n                        .title(\"\" + operation_name + \"选项\")\r\n                        .body(\"选择特殊跳转类型\\n \\n \")\r\n                        .button(\"返回上一级菜单\")\r\n                        .button(\"退出菜单\")\r\n                        .show(player);\r\n                      if (afrItemEditor2.selection == undefined || afrItemEditor2.canceled) {\r\n                        return undefined;\r\n                      }\r\n                      switch (afrItemEditor2.selection) {\r\n                        case 0: //返回上一级菜单\r\n                          {\r\n                            resultItem.destination = \"#back\";\r\n                          }\r\n                          break;\r\n                        case 1: //退出菜单\r\n                          {\r\n                            resultItem.destination = \"#exit\";\r\n                          }\r\n                          break;\r\n                        default:\r\n                          tellErrorMessage(moduleName, \"[Admin] afrItemEditor2.selection ERROR @\" + player.name);\r\n                          return undefined;\r\n                      }\r\n                    }\r\n                    break;\r\n                  case 3: // 保持原有设置\r\n                    {\r\n                      if (\r\n                        // 若原有设置不存在\r\n                        raw_data.type != \"route\" ||\r\n                        raw_data.destination == undefined ||\r\n                        raw_data.destination.trim() == \"\"\r\n                      ) {\r\n                        let msfr = await new MessageFormData()\r\n                          .title(\"错误\")\r\n                          .body(\"原有设置不存在\")\r\n                          .button1(\"确定\")\r\n                          .button2(\"退出\")\r\n                          .show(player);\r\n                        if (msfr.canceled || msfr.selection == 2) {\r\n                          return undefined;\r\n                        }\r\n                      }\r\n                      resultItem.destination = raw_data.destination;\r\n                    }\r\n                    break;\r\n                  default:\r\n                    throw new Error(\"[Admin] afrItemEditor2.selection ERROR @\" + player.name);\r\n                    return;\r\n                }\r\n              }\r\n              break;\r\n            case \"script\":\r\n              {\r\n                let afrItemEditor2 = await new ModalFormData()\r\n                  .title(\"\" + operation_name + \"选项\")\r\n                  .textField(\r\n                    \"输入目标脚本的函数名(位于snowScripts下的函数名)\",\r\n                    \"输入键名\",\r\n                    \"\" + (raw_data?.type == \"script\" ? raw_data.script ?? \"\" : \"\")\r\n                  )\r\n                  .toggle(\"检查是否存在\", true)\r\n                  .show(player);\r\n                if (afrItemEditor2.formValues == undefined || afrItemEditor2.canceled) {\r\n                  return undefined;\r\n                }\r\n                if (afrItemEditor2.formValues[0] == undefined || afrItemEditor2.formValues[0].trim() == \"\") {\r\n                  let msfr = await new MessageFormData()\r\n                    .title(\"错误\")\r\n                    .body(\"目标脚本函数名不可为空\")\r\n                    .button1(\"确定\")\r\n                    .button2(\"退出\")\r\n                    .show(player);\r\n                  if (msfr.canceled || msfr.selection == 2) {\r\n                    return undefined;\r\n                  }\r\n                  continue;\r\n                }\r\n                // 检查是否存在\r\n                if (afrItemEditor2.formValues[1] == true) {\r\n                  if (!snowScripts[afrItemEditor2.formValues[0]]) {\r\n                    let msfr = await new MessageFormData()\r\n                      .title(\"错误\")\r\n                      .body(\"目标脚本函数不存在\")\r\n                      .button1(\"确定\")\r\n                      .button2(\"退出\")\r\n                      .show(player);\r\n                    if (msfr.canceled || msfr.selection == 2) {\r\n                      return undefined;\r\n                    }\r\n                    continue;\r\n                  }\r\n                }\r\n                // 保存\r\n                resultItem.script = afrItemEditor2.formValues[0].trim();\r\n              }\r\n              break;\r\n          }\r\n          break;\r\n        } // while 2\r\n        // 完成\r\n        let msfrFinish = await new MessageFormData()\r\n          .title(\"提示\")\r\n          .body(\"请核对以下JSON信息，决定是否保存:\\n\" + JSON.stringify(resultItem))\r\n          .button1(\"保存更改\")\r\n          .button2(\"放弃更改\")\r\n          .show(player);\r\n        if (msfrFinish.canceled) return;\r\n        if (msfrFinish.selection == 1) {\r\n          return resultItem;\r\n        }\r\n        if (msfrFinish.selection == 2) {\r\n          return undefined;\r\n        }\r\n        // 子界面1 name tag type\r\n      }\r\n\r\n      // 选择菜单\r\n      let targetListKey = await chooseListFromAll(\"目标\");\r\n      if (targetListKey == undefined) return false;\r\n      // 选择操作\r\n      let afrChooseOperation = await new ActionFormData()\r\n        .title(\"请选择要进行的编辑操作\")\r\n        .button(\"修改选项\")\r\n        .button(\"添加选项\")\r\n        .button(\"删除选项\")\r\n        .button(\"移动选项\")\r\n        .show(player);\r\n      // 若退出\r\n      if (afrChooseOperation.canceled || afrChooseOperation.selection == undefined) {\r\n        return false;\r\n      }\r\n\r\n      switch (afrChooseOperation.selection) {\r\n        case 0: // 修改选项\r\n          {\r\n            let targetItemIndex = await chooseItem(data.snow[targetListKey], \"选择要修改的选项\");\r\n            if (targetItemIndex == undefined) {\r\n              return false;\r\n            }\r\n            let resultItem = await editItem(\"修改\", data.snow[targetListKey].list[targetItemIndex]);\r\n            if (resultItem == undefined) {\r\n              return false;\r\n            }\r\n            data.snow[targetListKey].list[targetItemIndex] = resultItem;\r\n            saveData(\"@\" + player.nameTag);\r\n          }\r\n          break;\r\n        case 1: // 添加选项\r\n          {\r\n            let resultItem = await editItem(\"添加\");\r\n            if (resultItem == undefined) {\r\n              return false;\r\n            }\r\n            data.snow[targetListKey].list.push(resultItem);\r\n            saveData(\"@\" + player.nameTag);\r\n          }\r\n          break;\r\n        case 2: // 删除选项\r\n          {\r\n            let targetItemIndex = await chooseItem(data.snow[targetListKey], \"选择要删除的选项\");\r\n            if (targetItemIndex == undefined) {\r\n              return false;\r\n            }\r\n            let msgResponse = await new MessageFormData()\r\n              .title(\"警告\")\r\n              .body(\"确定删除此选项？\")\r\n              .button1(\"确定删除\")\r\n              .button2(\"还是算了\")\r\n              .show(player);\r\n            if (msgResponse.selection == 1) {\r\n              data.snow[targetListKey].list.splice(targetItemIndex, 1);\r\n              saveData(\"@\" + player.nameTag);\r\n            } else {\r\n              return false;\r\n            }\r\n          }\r\n          break;\r\n        case 3: // 移动选项\r\n          {\r\n            // 选择移动源\r\n            let originalItemIndex = await chooseItem(data.snow[targetListKey], \"选择要移动的选项\"); // TODO\r\n            if (originalItemIndex == undefined) {\r\n              return false;\r\n            }\r\n            // 选择目标列表\r\n            let destListKey = await chooseListFromAll(\"目标\");\r\n            if (destListKey == undefined) return false;\r\n            // 目标列表与源列表相同\r\n            let same = destListKey == targetListKey;\r\n            // 选择目标选项\r\n            let destListObj = data.snow[destListKey];\r\n            if (same) {\r\n              var tempItemObj = data.snow[destListKey].list.splice(originalItemIndex, 1)[0];\r\n            }\r\n            destListObj.list.push({ name: \"\", type: \"null\" });\r\n            let destItemIndex = await chooseItem(destListObj, \"选择插入位置(所选按钮上方)\");\r\n            if (destItemIndex == undefined) return false;\r\n            let msgResponse = await new MessageFormData()\r\n              .title(\"提示\")\r\n              .body(\r\n                \"§l确定将选项: §r\\n\" +\r\n                  data.snow[targetListKey].list[originalItemIndex] +\r\n                  \"\\n从[\" +\r\n                  data.snow[destListKey].snow +\r\n                  \"第\" +\r\n                  (originalItemIndex + 1) +\r\n                  \"项 移动至[\" +\r\n                  data.snow[destListKey].name +\r\n                  \"]第\" +\r\n                  (destItemIndex + 1) +\r\n                  \"项?\"\r\n              )\r\n              .button1(\"确定移动\")\r\n              .button2(\"还是算了\")\r\n              .show(player);\r\n\r\n            if (msgResponse.selection == 1) {\r\n              let itemObj = null;\r\n              if (same) {\r\n                itemObj = tempItemObj;\r\n              } else {\r\n                itemObj = data.snow[targetListKey].list.splice(originalItemIndex, 1)[0];\r\n              }\r\n              data.snow[destListKey].list.splice(destItemIndex, 0, itemObj);\r\n              data.snow[destListKey].list.pop();\r\n              saveData(\"@\" + player.nameTag);\r\n            } else {\r\n              if (same) data.snow[destListKey].list.splice(originalItemIndex, 0, tempItemObj);\r\n              data.snow[destListKey].list.pop();\r\n              return false;\r\n            }\r\n          }\r\n          break;\r\n      }\r\n      break;\r\n    }\r\n    return false;\r\n  },\r\n  admin_snow_editList: async function (player, list_key) {\r\n    // 定义选择选项用的函数(列出所有菜单，让人选)\r\n    async function chooseListFromAll(operation_name: string): Promise<string | undefined> {\r\n      // 选择列表\r\n      let afdChooseList = new ActionFormData().title(\"\" + operation_name + \"列表\");\r\n      let keyList = [];\r\n      for (let item in data.snow) {\r\n        if (data.snow[item].lock == undefined || data.snow[item].lock == false) {\r\n          keyList.push(item);\r\n          afdChooseList = afdChooseList.button(data.snow[item].name);\r\n        }\r\n      }\r\n      let afrChooseList = await afdChooseList.show(player);\r\n      if (afrChooseList.canceled || afrChooseList.selection == undefined) return undefined;\r\n      return keyList[afrChooseList.selection];\r\n    }\r\n    // 定义选择菜单的函数\r\n    async function chooseList(operation_name: string): Promise<string | undefined> {\r\n      while (true) {\r\n        // 选择方式\r\n        let afrItemEditor2 = await new ActionFormData()\r\n          .title(\"\" + operation_name + \"列表\")\r\n          .body(\"通过何种方式选择选择目标菜单？\\n \\n \")\r\n          .button(\"目标菜单列表\")\r\n          .button(\"直接输入键名\")\r\n          .show(player);\r\n        if (afrItemEditor2.selection == undefined || afrItemEditor2.canceled) {\r\n          return undefined;\r\n        }\r\n        // 通过不同方式选择目标菜单\r\n        switch (afrItemEditor2.selection) {\r\n          case 0: // 目标菜单列表\r\n            {\r\n              let targetListKey = await chooseListFromAll(\"跳转\");\r\n              if (targetListKey == undefined || targetListKey == \"\") return undefined;\r\n              return targetListKey;\r\n            }\r\n            break;\r\n          case 1: // 直接输入键名\r\n            {\r\n              let afrItemEditor2 = await new ModalFormData()\r\n                .title(\"\" + operation_name + \"选项\")\r\n                .textField(\"输入目标菜单键名\", \"输入键名\")\r\n                .toggle(\"允许修改上锁菜单\", false)\r\n                .show(player);\r\n              if (afrItemEditor2.formValues == undefined || afrItemEditor2.canceled) {\r\n                return undefined;\r\n              }\r\n              if (afrItemEditor2.formValues[0] == undefined || afrItemEditor2.formValues[0].trim() == \"\") {\r\n                let msfr = await new MessageFormData()\r\n                  .title(\"错误\")\r\n                  .body(\"目标菜单键名不可为空\")\r\n                  .button1(\"确定\")\r\n                  .button2(\"退出\")\r\n                  .show(player);\r\n                if (msfr.canceled || msfr.selection == 2) {\r\n                  return undefined;\r\n                }\r\n                continue;\r\n              }\r\n              // 检查是否存在\r\n              if (!data.snow[afrItemEditor2.formValues[0]]) {\r\n                let msfr = await new MessageFormData()\r\n                  .title(\"错误\")\r\n                  .body(\"目标菜单不存在\")\r\n                  .button1(\"确定\")\r\n                  .button2(\"退出\")\r\n                  .show(player);\r\n                if (msfr.canceled || msfr.selection == 2) {\r\n                  return undefined;\r\n                }\r\n                continue;\r\n              }\r\n              // 检查是否上锁\r\n              if (data.snow[afrItemEditor2.formValues[0]].lock == true) {\r\n                if (afrItemEditor2.formValues[1] == undefined || afrItemEditor2.formValues[1] == false) {\r\n                  let msfr = await new MessageFormData()\r\n                    .title(\"错误\")\r\n                    .body(\"菜单已上锁，无法进行操作\")\r\n                    .button1(\"确定\")\r\n                    .button2(\"退出\")\r\n                    .show(player);\r\n                  if (msfr.canceled || msfr.selection == 2) {\r\n                    return undefined;\r\n                  }\r\n                  continue;\r\n                } else {\r\n                  if (isAdmin(player.nameTag)) {\r\n                    let msfr = await new MessageFormData()\r\n                      .title(\"警告\")\r\n                      .body(\"目标菜单已上锁，请谨慎编辑!\")\r\n                      .button1(\"确定\")\r\n                      .button2(\"退出\")\r\n                      .show(player);\r\n                    if (msfr.canceled || msfr.selection == 2) {\r\n                      return undefined;\r\n                    }\r\n                  } else {\r\n                    let msfr = await new MessageFormData()\r\n                      .title(\"错误\")\r\n                      .body(\"菜单已上锁，无法进行操作\")\r\n                      .button1(\"确定\")\r\n                      .button2(\"退出\")\r\n                      .show(player);\r\n                    if (msfr.canceled || msfr.selection == 2) {\r\n                      return undefined;\r\n                    }\r\n                    continue;\r\n                  }\r\n                }\r\n              }\r\n              // 返回\r\n              return afrItemEditor2.formValues[0];\r\n            }\r\n            break;\r\n          default:\r\n            throw new Error(\"[Admin] afrItemEditor2.selection ERROR @\" + player.name);\r\n            return;\r\n        }\r\n      }\r\n    }\r\n    // 定义编辑菜单的函数\r\n    async function editList(\r\n      operation_name: string,\r\n      check_repeat?: boolean,\r\n      raw_data?: SnowListData\r\n    ): Promise<SnowListData | undefined> {\r\n      // tellMessage(moduleName, JSON.stringify(raw_data));\r\n      // 结果\r\n      let resultKey = \"\";\r\n      let resultList: SnowList = {\r\n        name: \"\",\r\n        title: \"\",\r\n        body: \"\",\r\n        show_back: false,\r\n        list: [],\r\n      };\r\n      // 若没给raw_data 用简单模板代替\r\n      if (raw_data == undefined) {\r\n        raw_data = {\r\n          snow_list: { name: \"\", title: \"\", body: \"\", show_back: false, list: [] },\r\n          key: \"\",\r\n        };\r\n      }\r\n      while (true) {\r\n        let afrListEditor1 = await new ModalFormData()\r\n          .title(\"\" + operation_name + \"列表\")\r\n          .textField(\r\n            \"§l列表键名§r\\n不会被显示出来，为该菜单的唯一身份标识，不可重复\\n同时作为JSON中该列表的键名\",\r\n            \"输入列表键名\",\r\n            raw_data.key\r\n          )\r\n          .textField(\r\n            \"§l列表名称(可选)§r\\n不会被显示出来，自助编辑菜单时方便标记\\n可用双S符号调色，\\\\n换行。最多两行，每行最多约16个汉字(32个字母)\",\r\n            \"输入显示名称, 不填默认为键名\",\r\n            raw_data.snow_list.name\r\n          )\r\n          .textField(\"§l列表标题§r\\n进入列表时的窗口标题\\n可用双S符号调色\", \"输入显示名称\", raw_data.snow_list.title)\r\n          .textField(\r\n            \"§l提示文字(可选)§r\\n显示在窗口内部上方的一段文字\\n可用双S符号调色，\\\\n换行，具体字符不限\",\r\n            \"输入提示文字\",\r\n            raw_data.snow_list.body\r\n          )\r\n          .toggle(\"显示返回上一级菜单按钮\", raw_data.snow_list.show_back)\r\n          .toggle(\"锁定菜单(仅管理员)\", raw_data.snow_list.lock ?? false)\r\n          .show(player);\r\n        if (afrListEditor1.canceled || afrListEditor1.formValues == undefined) {\r\n          return undefined;\r\n        }\r\n        // 若键名为空\r\n        if (afrListEditor1.formValues[0].trim() == \"\") {\r\n          let msfr = await new MessageFormData()\r\n            .title(\"错误\")\r\n            .body(\"列表键名不可为空\")\r\n            .button1(\"确定\")\r\n            .button2(\"退出\")\r\n            .show(player);\r\n          if (msfr.canceled || msfr.selection == 2) {\r\n            return undefined;\r\n          }\r\n          continue;\r\n        }\r\n        resultKey = afrListEditor1.formValues[0];\r\n        // 查询键名是否重复\r\n        if (check_repeat) {\r\n          let keyExist = false;\r\n          for (let key in data.snow) {\r\n            if (key == resultKey) {\r\n              keyExist = true;\r\n              break;\r\n            }\r\n          }\r\n          if (keyExist) {\r\n            let msfr = await new MessageFormData()\r\n              .title(\"错误\")\r\n              .body(\"列表键名重复\")\r\n              .button1(\"确定\")\r\n              .button2(\"退出\")\r\n              .show(player);\r\n            if (msfr.canceled || msfr.selection == 2) {\r\n              return undefined;\r\n            }\r\n            continue;\r\n          }\r\n        }\r\n        // 若上锁 查询是否为管理员\r\n        if (afrListEditor1.formValues[5] && !isAdmin(player.nameTag)) {\r\n          let msfr = await new MessageFormData()\r\n            .title(\"错误\")\r\n            .body(\"非管理员无法创建锁定列表\")\r\n            .button1(\"确定\")\r\n            .button2(\"退出\")\r\n            .show(player);\r\n          if (msfr.canceled || msfr.selection == 2) {\r\n            return undefined;\r\n          }\r\n          continue;\r\n        }\r\n        // 列表名字\r\n        let listName = afrListEditor1.formValues[1].trim();\r\n        resultList.name = listName == \"\" ? resultKey : listName;\r\n        // 列表标题\r\n        resultList.title = afrListEditor1.formValues[2];\r\n        // 列表提示文字\r\n        resultList.body = afrListEditor1.formValues[3];\r\n        // 显示返回按钮\r\n        resultList.show_back = afrListEditor1.formValues[4];\r\n        // 成员选项\r\n        resultList.list = raw_data.snow_list.list;\r\n        // 上锁\r\n        if (afrListEditor1.formValues[5]) {\r\n          resultList.lock = true;\r\n        }\r\n        // 完成\r\n        let msfrFinish = await new MessageFormData()\r\n          .title(\"提示\")\r\n          .body(\"请核对以下JSON信息，决定是否保存:\\n\" + JSON.stringify(resultList))\r\n          .button1(\"保存更改\")\r\n          .button2(\"放弃更改\")\r\n          .show(player);\r\n        if (msfrFinish.canceled) return;\r\n        if (msfrFinish.selection == 1) {\r\n          return { snow_list: resultList, key: resultKey };\r\n        }\r\n        if (msfrFinish.selection == 2) {\r\n          return undefined;\r\n        }\r\n        return undefined;\r\n      }\r\n    }\r\n\r\n    // 选择操作\r\n    let afrChooseOperation = await new ActionFormData()\r\n      .title(\"请选择要进行的操作\")\r\n      .button(\"添加列表\")\r\n      .button(\"删除列表\")\r\n      .button(\"编辑列表\")\r\n      .show(player);\r\n    // 若退出\r\n    if (afrChooseOperation.canceled || afrChooseOperation.selection == undefined) {\r\n      return false;\r\n    }\r\n\r\n    switch (afrChooseOperation.selection) {\r\n      case 0: // 添加列表\r\n        {\r\n          let resultListData = await editList(\"添加\", true);\r\n          if (resultListData == undefined) return false;\r\n          data.snow[resultListData.key] = resultListData.snow_list;\r\n          saveData(\"@\" + player.nameTag);\r\n        }\r\n        break;\r\n      case 1: // 删除列表\r\n        {\r\n          // 选择目标列表\r\n          let targetListKey = await chooseList(\"删除\");\r\n          if (targetListKey == undefined) {\r\n            return false;\r\n          }\r\n          // 选择安全删除操作\r\n          let afrSafeResponse = await new ModalFormData()\r\n            .title(\"安全删除\")\r\n            .toggle(\"对已上锁菜单执行下列操作(仅管理员)\", false)\r\n            .toggle(\"删除所有跳转至目标菜单的选项\", true)\r\n            .show(player);\r\n          if (afrSafeResponse.canceled || afrSafeResponse.formValues == undefined) return false;\r\n          // 警告\r\n          let msgResponse = await new MessageFormData()\r\n            .title(\"警告\")\r\n            .body(\"§l确定删除菜单?§r\\n目标菜单键名: \" + targetListKey + \"\\n菜单名称: \" + data.snow[targetListKey].name)\r\n            .button1(\"确定删除\")\r\n            .button2(\"还是算了\")\r\n            .show(player);\r\n          // 安全删除操作\r\n          if (afrSafeResponse.formValues[1] == true) {\r\n            let ignoreLocked = afrSafeResponse.formValues[0] == false || !isAdmin(player.nameTag);\r\n            // 遍历菜单\r\n            for (let key in data.snow) {\r\n              if (ignoreLocked && data.snow[key].lock == true) continue;\r\n              let length = data.snow[key].list.length;\r\n              // 遍历选项\r\n              for (let i = 0; i < length; ++i) {\r\n                if (data.snow[key].list[i].type == \"route\" && data.snow[key].list[i].destination == targetListKey) {\r\n                  data.snow[key].list.splice(i, 1);\r\n                  --length;\r\n                  --i;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          // 删除并保存\r\n          if (msgResponse.selection == 1) {\r\n            data.snow[targetListKey] = undefined;\r\n            await saveData(\"@\" + player.nameTag);\r\n            reloadData(); // TODO\r\n          } else {\r\n            return false;\r\n          }\r\n        }\r\n        break;\r\n      case 2: // 编辑列表\r\n        {\r\n          // 选择菜单\r\n          let targetListKey = await chooseList(\"编辑\");\r\n          if (targetListKey == undefined) {\r\n            return false;\r\n          }\r\n          // 编辑菜单\r\n          let resultListData = await editList(\"编辑\", false, {\r\n            key: targetListKey,\r\n            snow_list: data.snow[targetListKey],\r\n          });\r\n          if (resultListData == undefined) return false;\r\n          if (targetListKey != resultListData.key) {\r\n            data.snow[targetListKey] = undefined;\r\n          }\r\n          data.snow[resultListData.key] = resultListData.snow_list;\r\n          saveData(\"@\" + player.nameTag);\r\n        }\r\n        break;\r\n      default:\r\n        throw new Error(\"[Admin] afrChooseOperation.selection ERROR @\" + player.name);\r\n        return true;\r\n    }\r\n    return false;\r\n  },\r\n  admin_settings_newPlayer: async function (player, list_key) {\r\n    while (true) {\r\n      let mfr = await new ModalFormData()\r\n        .title(\"新成员管理\")\r\n        .textField(\"新成员判定标签\\n§o无标签则判定为新成员\", \"输入标签\", data.settings.new_player.limit_tag)\r\n        .toggle(\"允许使用雪球菜单\", data.settings.new_player.allow_snow)\r\n        .textField(\"§l新人建筑区坐标\\n§r起始点X坐标\", \"输入坐标\", \"\" + data.settings.new_player.allow_area.begin_x)\r\n        .textField(\"起始点Z坐标\", \"输入坐标\", \"\" + data.settings.new_player.allow_area.begin_z)\r\n        .textField(\"结束点X坐标\", \"输入坐标\", \"\" + data.settings.new_player.allow_area.end_x)\r\n        .textField(\"结束点Z坐标\", \"输入坐标\", \"\" + data.settings.new_player.allow_area.end_z)\r\n        .toggle(\"雪球菜单访客模式\", data.settings.new_player.guest_snow)\r\n        .show(player);\r\n      if (mfr.canceled || mfr.formValues == undefined) return false;\r\n      if (mfr.formValues[0].trim() == \"\") {\r\n        let msfr = await new MessageFormData()\r\n          .title(\"错误\")\r\n          .body(\"判定标签不可为空\")\r\n          .button1(\"确定\")\r\n          .button2(\"退出\")\r\n          .show(player);\r\n        if (msfr.canceled || msfr.selection == 2) {\r\n          return false;\r\n        }\r\n        continue;\r\n      }\r\n      if (\r\n        mfr.formValues[2].trim() == \"\" ||\r\n        isNaN(Number(mfr.formValues[2].trim())) ||\r\n        mfr.formValues[3].trim() == \"\" ||\r\n        isNaN(Number(mfr.formValues[3].trim())) ||\r\n        mfr.formValues[4].trim() == \"\" ||\r\n        isNaN(Number(mfr.formValues[4].trim())) ||\r\n        mfr.formValues[5].trim() == \"\" ||\r\n        isNaN(Number(mfr.formValues[5].trim()))\r\n      ) {\r\n        let msfr = await new MessageFormData()\r\n          .title(\"错误\")\r\n          .body(\"请输入正确坐标\")\r\n          .button1(\"确定\")\r\n          .button2(\"退出\")\r\n          .show(player);\r\n        if (msfr.canceled || msfr.selection == 2) {\r\n          return false;\r\n        }\r\n        continue;\r\n      }\r\n      data.settings.new_player.limit_tag = mfr.formValues[0];\r\n      data.settings.new_player.allow_snow = mfr.formValues[1];\r\n      data.settings.new_player.allow_area.begin_x = Number(mfr.formValues[2].trim());\r\n      data.settings.new_player.allow_area.begin_z = Number(mfr.formValues[3].trim());\r\n      data.settings.new_player.allow_area.end_x = Number(mfr.formValues[4].trim());\r\n      data.settings.new_player.allow_area.end_z = Number(mfr.formValues[5].trim());\r\n      data.settings.new_player.guest_snow = mfr.formValues[6];\r\n      saveData(\"@\" + player.name);\r\n\r\n      // let msfr = await new MessageFormData()\r\n      //   .title(\"提示\")\r\n      //   .body(\"在服务端执行reload后生效\")\r\n      //   .button1(\"确定\")\r\n      //   .button2(\"退出\")\r\n      //   .show(player);\r\n      return false;\r\n    }\r\n  },\r\n  admin_settings_world: async function (player, list_key) {\r\n    let mfr = await new ModalFormData()\r\n      .title(\"世界选项\")\r\n      .toggle(\"允许爆炸\", data.settings.world.allow_explode)\r\n      .show(player);\r\n    if (mfr.canceled || mfr.formValues == undefined) return false;\r\n    data.settings.world.allow_explode = mfr.formValues[0];\r\n    saveData(\"@\" + player.name);\r\n    return false;\r\n  },\r\n  admin_userManager: async function (player, list_key) {\r\n    let afr = await new ActionFormData()\r\n      .title(\"玩家信息列表\")\r\n      .body(\"如何选择目标玩家\")\r\n      .button(\"在线玩家列表\")\r\n      .button(\"输入玩家ID\")\r\n      .show(player);\r\n    if (afr.canceled || afr.selection == undefined) return false;\r\n    // 在线玩家数组\r\n    let playerList = [];\r\n    for (let item of world.getPlayers()) {\r\n      playerList.push(item);\r\n      // tellMessage(moduleName, \"Push Player: \" + item.name);\r\n    }\r\n    let targetPlayer = \"\";\r\n    let resultData: PlayerData = {};\r\n    if (afr.selection == 0) {\r\n      // 在线玩家列表\r\n      let afd2 = new ActionFormData().title(\"玩家信息列表\").body(\"选择一个在线玩家以查看信息\");\r\n      for (let i = 0; i < playerList.length; ++i) {\r\n        afd2 = afd2.button(playerList[i].name);\r\n      }\r\n      let afr2 = await afd2.show(player);\r\n      if (afr2.canceled || afr2.selection == undefined) return false;\r\n      targetPlayer = playerList[afr2.selection].name;\r\n      // tellMessage(moduleName, \"targetPlayer = \" + targetPlayer);\r\n      resultData = data.players[targetPlayer];\r\n    } else if (afr.selection == 1) {\r\n      // 输入玩家ID\r\n      while (true) {\r\n        let mfr = await new ModalFormData().title(\"玩家信息列表\").textField(\"玩家ID\", \"输入玩家ID\").show(player);\r\n        if (mfr.canceled || mfr.formValues == undefined) return false;\r\n        if (mfr.formValues[0].trim() == \"\") {\r\n          let msfr = await new MessageFormData()\r\n            .title(\"错误\")\r\n            .body(\"玩家ID不可为空\")\r\n            .button1(\"确定\")\r\n            .button2(\"退出\")\r\n            .show(player);\r\n          if (msfr.canceled || msfr.selection == 2) {\r\n            return false;\r\n          }\r\n          continue;\r\n        }\r\n        if (!data.players[mfr.formValues[0].trim()]) {\r\n          let msfr = await new MessageFormData()\r\n            .title(\"提示\")\r\n            .body(\"玩家ID:\" + mfr.formValues[0].trim() + \"\\n该玩家信息不存在\")\r\n            .button1(\"确定\")\r\n            .button2(\"退出\")\r\n            .show(player);\r\n          if (msfr.canceled || msfr.selection == 2) {\r\n            return false;\r\n          }\r\n          continue;\r\n          // if (msfr.selection == 2) continue;\r\n        }\r\n        targetPlayer = mfr.formValues[0].trim();\r\n        // resultData = {\r\n        //   job: \"无\",\r\n        //   goodat: \"未知\",\r\n        //   money: 0,\r\n        //   place: \"无籍贯\",\r\n        //   last_login: 0,\r\n        //   last_checkin: 0,\r\n        //   checkin_times: 0,\r\n        // };\r\n        // break;\r\n        resultData = data.players[targetPlayer];\r\n        break;\r\n      } // while\r\n    } // else if\r\n\r\n    //查看和编辑\r\n    let job = data.players[targetPlayer]\r\n      ? data.players[targetPlayer].job ?? data.settings.players.default_job\r\n      : data.settings.players.default_job;\r\n    let goodat = data.players[targetPlayer]\r\n      ? data.players[targetPlayer].goodat ?? data.settings.players.default_goodat\r\n      : data.settings.players.default_goodat;\r\n    let place = data.players[targetPlayer]\r\n      ? data.players[targetPlayer].place ?? data.settings.players.default_place\r\n      : data.settings.players.default_place;\r\n    let online_time = getPlayerScore(world.scoreboard.getObjective(\"time\"), targetPlayer) ?? \"null\";\r\n    let money = data.players[targetPlayer]\r\n      ? data.players[targetPlayer].money ?? data.settings.players.default_money\r\n      : data.settings.players.default_money;\r\n    let checkin_times = data.players[targetPlayer]\r\n      ? data.players[targetPlayer].checkin_times ?? data.settings.players.default_checkin_times\r\n      : data.settings.players.default_checkin_times;\r\n    let bCheckin = false;\r\n    let bOnline = playerList.find((item) => {\r\n      return item.name == targetPlayer;\r\n    })\r\n      ? true\r\n      : false;\r\n    let last_login = bOnline\r\n      ? \"在线中\"\r\n      : data.players[targetPlayer]\r\n      ? (() => {\r\n          if (!data.players[targetPlayer].last_login || data.players[targetPlayer].last_login == \"0\") return \"从未上线\";\r\n          let date = new Date(data.players[targetPlayer].last_login);\r\n          date.setTime(date.getTime() + 28800000);\r\n          return (\r\n            \"\" +\r\n            date.getFullYear() +\r\n            \"年\" +\r\n            (date.getMonth() + 1) +\r\n            \"月\" +\r\n            date.getDate() +\r\n            \"日 §l\" +\r\n            date.getHours() +\r\n            \":\" +\r\n            (date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes()) +\r\n            \"§r\"\r\n          );\r\n        })()\r\n      : \"从未上线\";\r\n    let last_checkin = data.players[targetPlayer]\r\n      ? data.players[targetPlayer].last_checkin > 0\r\n        ? (() => {\r\n            let date = data.players[targetPlayer].last_checkin;\r\n            return Math.floor(date / 10000) + \"年\" + (Math.floor(date / 100) % 100) + \"月\" + (date % 100) + \"日\";\r\n          })()\r\n        : \"从未签到\"\r\n      : \"从未签到\";\r\n    if (data.players[targetPlayer]) {\r\n      if (data.players[targetPlayer].last_checkin == getDate()) {\r\n        bCheckin = true;\r\n      }\r\n    }\r\n\r\n    //显示\r\n    let afd2 = new ActionFormData()\r\n      .title(\"玩家信息\")\r\n      .body(\r\n        \"\" +\r\n          \"\\n§r§l玩家ID:             §r§e\" +\r\n          targetPlayer +\r\n          \"\\n§r§l职业:               §r§e\" +\r\n          job +\r\n          \"\\n§r§l特长:               §r§e\" +\r\n          goodat +\r\n          \"\\n§r§l所在籍:             §r§e\" +\r\n          place +\r\n          \"\\n§r§l在线总时长:         §r§e\" +\r\n          online_time +\r\n          \" 分钟\" +\r\n          \"\\n§r§l金币:               §r§e\" +\r\n          money +\r\n          \"\\n§r§l签到总天数:         §r§e\" +\r\n          checkin_times +\r\n          \"\\n§r§l最近一次上线:       §r§e\" +\r\n          last_login +\r\n          \"\\n§r§l最近一次签到:       §r§e\" +\r\n          last_checkin +\r\n          \"\\n\\n§r§e\" +\r\n          (bCheckin ? \"今日已签到\" : \"今日未签到\")\r\n      )\r\n      .button(\"返回上一级\");\r\n\r\n    if (isAdmin(player.nameTag)) {\r\n      afd2 = afd2.button(\"编辑信息\");\r\n    }\r\n    let afr2 = await afd2.show(player);\r\n    if (afr2.canceled || afr2.selection == undefined || afr2.selection == 0) return false;\r\n    if (afr2.selection == 1 && isAdmin(player.name)) {\r\n      while (true) {\r\n        // 编辑信息\r\n        let mfr = await new ModalFormData()\r\n          .title(\"编辑玩家[\" + targetPlayer + \"]信息\")\r\n          .textField(\"职位\", \"在此输入\", job)\r\n          .textField(\"特长\", \"在此输入\", goodat)\r\n          .textField(\"所在籍\", \"在此输入\", place)\r\n          .textField(\"金币\", \"在此输入\", \"\" + money)\r\n          .show(player);\r\n        if (mfr.canceled || mfr.formValues == undefined) return false;\r\n        if (isNaN(Number(mfr.formValues[3]))) {\r\n          let msfr = await new MessageFormData()\r\n            .title(\"错误\")\r\n            .body(\"金币必须为数字！\")\r\n            .button1(\"确定\")\r\n            .button2(\"退出\")\r\n            .show(player);\r\n          if (msfr.canceled || msfr.selection == 2) {\r\n            return false;\r\n          }\r\n          if (msfr.selection == 1) continue;\r\n        }\r\n        resultData.job = mfr.formValues[0].trim() == \"\" ? data.settings.players.default_job : mfr.formValues[0].trim();\r\n        resultData.goodat =\r\n          mfr.formValues[1].trim() == \"\" ? data.settings.players.default_goodat : mfr.formValues[1].trim();\r\n        resultData.place =\r\n          mfr.formValues[2].trim() == \"\" ? data.settings.players.default_place : mfr.formValues[2].trim();\r\n        resultData.money = Number(mfr.formValues[3].trim());\r\n        // 完成\r\n        let msfrFinish = await new MessageFormData()\r\n          .title(\"提示\")\r\n          .body(\"请核对以下JSON信息，决定是否保存:\\n\" + JSON.stringify(resultData))\r\n          .button1(\"保存更改\")\r\n          .button2(\"放弃更改\")\r\n          .show(player);\r\n        if (msfrFinish.canceled) return false;\r\n        if (msfrFinish.selection == 1) {\r\n          data.players[targetPlayer] = resultData;\r\n          await saveData(\"@\" + player.name);\r\n          reloadData();\r\n        }\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  },\r\n  admin_sweeper_runAll: async function (player, list_key) {\r\n    tellMessage(data.settings.entity_clear.sender, \"§e@\" + player.name + \"§r 喊我扫地啦！\");\r\n    data.settings.entity_clear.config.forEach((config: EntityClearConfigType) => {\r\n      if (!config.enable) return;\r\n      clearEntity(config);\r\n    });\r\n    return false;\r\n  },\r\n  admin_sweeper_manage: async function (player, list_key) {\r\n    async function chooseConfig(): Promise<number | undefined> {\r\n      let length = data.settings.entity_clear.config.length;\r\n      let afd = new ActionFormData().title(\"配置管理\").body(\"请选择一个配置\");\r\n      if (length == 0) {\r\n        afd = afd.button(\"(无配置)\");\r\n      } else {\r\n        data.settings.entity_clear.config.forEach((config: EntityClearConfigType) => {\r\n          afd = afd.button(config.name);\r\n        });\r\n      }\r\n      let afr = await afd.show(player);\r\n      if (afr.canceled || afr.selection == undefined) return undefined;\r\n      return afr.selection;\r\n    }\r\n    async function chooseList(config: EntityClearConfigType): Promise<number | undefined> {\r\n      let length = config.list.length;\r\n      if (length == 0) {\r\n        let msfr = await new MessageFormData()\r\n          .title(\"错误\")\r\n          .body(\"该配置无实体组，请先至少添加一个实体组！\")\r\n          .button1(\"确定\")\r\n          .button2(\"退出\")\r\n          .show(player);\r\n        return undefined;\r\n      }\r\n      let afd = new ActionFormData().title(\"选择一个实体组\");\r\n      for (let i = 0; i < length; ++i) {\r\n        afd = afd.button(config.list[i].name);\r\n      }\r\n      let afr = await afd.show(player);\r\n      if (afr.canceled == true || afr.selection == undefined) return undefined;\r\n      return afr.selection;\r\n    }\r\n    async function editConfigHead(\r\n      config: EntityClearConfigType = {\r\n        // default config\r\n        enable: true,\r\n        name: \"新配置\",\r\n        show: \"新配置\",\r\n        display: true,\r\n        time: 300,\r\n        forecast: true,\r\n        foretime: 15,\r\n\r\n        last_clear: 0,\r\n        forecasted: false,\r\n        list: [],\r\n      }\r\n    ): Promise<EntityClearConfigType | undefined> {\r\n      while (true) {\r\n        let mdr = await new ModalFormData()\r\n          .title(\"编辑配置-运行规则\")\r\n          .toggle(\"启用此配置\", config.enable)\r\n          .textField(\"配置名称\", \"输入配置名称\", config.name)\r\n          .textField('显示名称(如：\"即将清理XXX\"的XXX)', \"输入显示名称\", config.show)\r\n          .toggle(\"清理时在聊天栏中提示\", config.display)\r\n          .textField(\"清理周期(秒)\", \"输入清理周期\", \"\" + config.time)\r\n          .toggle(\"清理前提醒\", config.forecast)\r\n          .slider(\"清理前多久提醒(秒)\", 3, 300, 1, config.foretime)\r\n          .show(player);\r\n        if (mdr.canceled || mdr.formValues == undefined) return undefined;\r\n        if (mdr.formValues[1].trim() == \"\") {\r\n          let msfr = await new MessageFormData()\r\n            .title(\"错误\")\r\n            .body(\"配置名字不可为空\")\r\n            .button1(\"确定\")\r\n            .button2(\"退出\")\r\n            .show(player);\r\n          if (msfr.canceled || msfr.selection == 2) {\r\n            return undefined;\r\n          }\r\n          continue;\r\n        }\r\n        if (mdr.formValues[2].trim() == \"\") {\r\n          let msfr = await new MessageFormData()\r\n            .title(\"错误\")\r\n            .body(\"显示名称不可为空\")\r\n            .button1(\"确定\")\r\n            .button2(\"退出\")\r\n            .show(player);\r\n          if (msfr.canceled || msfr.selection == 2) {\r\n            return undefined;\r\n          }\r\n          continue;\r\n        }\r\n        if (\r\n          mdr.formValues[4].trim() == \"\" ||\r\n          isNaN(Number(mdr.formValues[4].trim())) ||\r\n          Number(mdr.formValues[4].trim()) <= 0\r\n        ) {\r\n          let msfr = await new MessageFormData()\r\n            .title(\"错误\")\r\n            .body(\"不正确的清理周期！\")\r\n            .button1(\"确定\")\r\n            .button2(\"退出\")\r\n            .show(player);\r\n          if (msfr.canceled || msfr.selection == 2) {\r\n            return undefined;\r\n          }\r\n          continue;\r\n        }\r\n        if (mdr.formValues[6] >= Number(mdr.formValues[4].trim())) {\r\n          let msfr = await new MessageFormData()\r\n            .title(\"错误\")\r\n            .body(\"清理前提醒时间大于或等于运行周期！\")\r\n            .button1(\"确定\")\r\n            .button2(\"退出\")\r\n            .show(player);\r\n          if (msfr.canceled || msfr.selection == 2) {\r\n            return undefined;\r\n          }\r\n          continue;\r\n        }\r\n        config.enable = mdr.formValues[0];\r\n        config.name = mdr.formValues[1];\r\n        config.show = mdr.formValues[2];\r\n        config.display = mdr.formValues[3];\r\n        config.time = mdr.formValues[4];\r\n        config.forecast = mdr.formValues[5];\r\n        config.foretime = mdr.formValues[6];\r\n        return config;\r\n        break;\r\n      }\r\n    }\r\n    async function editConfig(\r\n      config: EntityClearConfigType = {\r\n        // default config\r\n        enable: true,\r\n        name: \"新配置\",\r\n        show: \"\",\r\n        display: true,\r\n        time: 300,\r\n        forecast: true,\r\n        foretime: 15,\r\n\r\n        last_clear: 0,\r\n        forecasted: false,\r\n        list: [],\r\n      }\r\n    ) {\r\n      let resultConfig: EntityClearConfigType = {\r\n        enable: config.enable,\r\n        name: config.name,\r\n        show: config.show,\r\n        display: config.display,\r\n        time: config.time,\r\n        forecast: config.forecast,\r\n        foretime: config.foretime,\r\n\r\n        last_clear: config.last_clear,\r\n        forecasted: config.forecasted,\r\n        list: [],\r\n      };\r\n      // 深拷贝\r\n      let length = config.list.length;\r\n      for (let i = 0; i < length; ++i) {\r\n        let item = { name: config.list[i].name, types: new Array() };\r\n        let length2 = config.list[i].types.length;\r\n        for (let j = 0; j < length2; ++j) {\r\n          item.types.push(config.list[i].types[j].concat());\r\n        }\r\n        resultConfig.list.push(item);\r\n      }\r\n\r\n      while (true) {\r\n        let afr = await new ActionFormData()\r\n          .title(\"编辑配置:\" + config.name)\r\n          .body(\"请选择一个选项\")\r\n          .button(\"运行规则\")\r\n          .button(\"管理实体\")\r\n          .button(\"删除实体\")\r\n          .button(\"添加实体\")\r\n          .show(player);\r\n        if (afr.canceled || afr.selection == undefined) return undefined;\r\n        switch (afr.selection) {\r\n          case 0: //运行规则\r\n            if (!(await editConfigHead(resultConfig))) {\r\n              return undefined;\r\n            }\r\n            break;\r\n          case 1: //管理实体\r\n            {\r\n              let targetList = await chooseList(config);\r\n              if (targetList == undefined) return false;\r\n              let length = config.list[targetList].types.length;\r\n              if (length == 0) {\r\n                let msfr = await new MessageFormData()\r\n                  .title(\"错误\")\r\n                  .body(\"该实体组无可用实体，请先至少添加一个实体！\")\r\n                  .button1(\"确定\")\r\n                  .button2(\"退出\")\r\n                  .show(player);\r\n                return undefined;\r\n              }\r\n              let mfd = new ModalFormData().title(\"要清除哪些实体？\");\r\n              for (let i = 0; i < length; ++i) {\r\n                mfd = mfd.toggle(\r\n                  \"\" +\r\n                    config.list[targetList].types[i][0] +\r\n                    (config.list[targetList].types[i][2] ? \" (\" + config.list[targetList].types[i][2] + \")\" : \"\"),\r\n                  config.list[targetList].types[i][1]\r\n                );\r\n              }\r\n              let mfr = await mfd.show(player);\r\n              if (mfr.canceled == true || mfr.formValues == undefined) return undefined;\r\n              for (let i = 0; i < length; ++i) {\r\n                resultConfig.list[targetList].types[i][1] = mfr.formValues[i];\r\n              }\r\n            }\r\n            break;\r\n          case 2: //删除实体\r\n            {\r\n              let targetList = await chooseList(config);\r\n              if (targetList == undefined) return false;\r\n              let length = config.list[targetList].types.length;\r\n              if (length == 0) {\r\n                let msfr = await new MessageFormData()\r\n                  .title(\"错误\")\r\n                  .body(\"该实体组无可用实体，请先至少添加一个实体！\")\r\n                  .button1(\"确定\")\r\n                  .button2(\"退出\")\r\n                  .show(player);\r\n                return undefined;\r\n              }\r\n              let mfd = new ActionFormData().title(\"编辑配置-删除实体\");\r\n              for (let i = 0; i < length; ++i) {\r\n                mfd = mfd.button(\r\n                  \"\" +\r\n                    config.list[targetList].types[i][0] +\r\n                    (config.list[targetList].types[i][2] ? \" (\" + config.list[targetList].types[i][2] + \")\" : \"\")\r\n                );\r\n              }\r\n              let mfr = await mfd.show(player);\r\n              if (mfr.canceled == true || mfr.selection == undefined) return undefined;\r\n              let msgResponse = await new MessageFormData()\r\n                .title(\"警告\")\r\n                .body(\r\n                  \"确定删除实体：\" +\r\n                    \"\" +\r\n                    config.list[targetList].types[mfr.selection][0] +\r\n                    (config.list[targetList].types[mfr.selection][2]\r\n                      ? \" (\" + config.list[targetList].types[mfr.selection][2] + \")\"\r\n                      : \"\") +\r\n                    \"？\"\r\n                )\r\n                .button1(\"确定删除\")\r\n                .button2(\"还是算了\")\r\n                .show(player);\r\n              if (msgResponse.selection == 1) {\r\n                resultConfig.list[targetList].types.splice(mfr.selection, 1);\r\n              } else {\r\n                return undefined;\r\n              }\r\n            }\r\n            break;\r\n          case 3: //添加实体\r\n            {\r\n              let targetList = await chooseList(config);\r\n              if (targetList == undefined) return false;\r\n              while (true) {\r\n                let mfr = await new ModalFormData()\r\n                  .title(\"编辑配置-添加实体\")\r\n                  .textField(\"实体ID\", \"输入实体ID\")\r\n                  .toggle(\"清除该实体\", true)\r\n                  .textField(\"实体中文备注(选填)\", \"输入实体中文备注\")\r\n                  .show(player);\r\n                if (mfr.canceled || mfr.formValues == undefined) return undefined;\r\n                if (mfr.formValues[0].trim() == \"\") {\r\n                  let msfr = await new MessageFormData()\r\n                    .title(\"错误\")\r\n                    .body(\"实体ID不可为空\")\r\n                    .button1(\"确定\")\r\n                    .button2(\"退出\")\r\n                    .show(player);\r\n                  if (msfr.canceled || msfr.selection == 2) {\r\n                    return undefined;\r\n                  }\r\n                  continue;\r\n                }\r\n                if (mfr.formValues[2].trim() == \"\")\r\n                  resultConfig.list[targetList].types.push([mfr.formValues[0].trim(), mfr.formValues[1]]);\r\n                else\r\n                  resultConfig.list[targetList].types.push([\r\n                    mfr.formValues[0].trim(),\r\n                    mfr.formValues[1],\r\n                    mfr.formValues[2].trim(),\r\n                  ]);\r\n                break;\r\n              }\r\n            }\r\n            break;\r\n        } // switch\r\n        // 完成\r\n        let msfrFinish = await new MessageFormData()\r\n          .title(\"提示\")\r\n          .body(\"请核对以下JSON信息，决定是否保存:\\n\" + JSON.stringify(resultConfig))\r\n          .button1(\"保存更改\")\r\n          .button2(\"放弃更改\")\r\n          .show(player);\r\n        if (msfrFinish.canceled) return;\r\n        if (msfrFinish.selection == 1) {\r\n          return resultConfig;\r\n        }\r\n        return undefined;\r\n      } // while\r\n    }\r\n    let afr = await new ActionFormData()\r\n      .title(\"配置管理\")\r\n      .body(\"请选择一个选项\")\r\n      .button(\"编辑配置\")\r\n      .button(\"添加配置\")\r\n      .button(\"删除配置\")\r\n      .show(player);\r\n    if (afr.canceled || afr.selection == undefined) return false;\r\n    switch (afr.selection) {\r\n      case 0: //编辑配置\r\n        {\r\n          let targetConfig = await chooseConfig();\r\n          if (targetConfig == undefined) {\r\n            return false;\r\n          }\r\n          let resultConfig = await editConfig(data.settings.entity_clear.config[targetConfig]);\r\n          if (resultConfig == undefined) {\r\n            return false;\r\n          }\r\n          data.settings.entity_clear.config[targetConfig] = resultConfig;\r\n          await saveData(\"@\" + player.name);\r\n          reloadData();\r\n        }\r\n        break;\r\n      case 1: //添加配置\r\n        {\r\n          let resultConfig = await editConfigHead();\r\n          if (resultConfig == undefined) {\r\n            return false;\r\n          }\r\n          data.settings.entity_clear.config.push(resultConfig);\r\n          saveData(\"@\" + player.name);\r\n        }\r\n        break;\r\n      case 2: //删除配置\r\n        {\r\n          let targetConfig = await chooseConfig();\r\n          if (targetConfig == undefined) {\r\n            return false;\r\n          }\r\n          let msgResponse = await new MessageFormData()\r\n            .title(\"警告\")\r\n            .body(\"确定删除配置：\" + data.settings.entity_clear.config[targetConfig].name + \"？\")\r\n            .button1(\"确定删除\")\r\n            .button2(\"还是算了\")\r\n            .show(player);\r\n          if (msgResponse.selection == 1) {\r\n            data.settings.entity_clear.config.splice(targetConfig, 1);\r\n            saveData(\"@\" + player.nameTag);\r\n          } else {\r\n            return false;\r\n          }\r\n        }\r\n        break;\r\n    }\r\n    return false;\r\n  },\r\n  admin_sweeper_settings: async function (player, list_key) {\r\n    while (true) {\r\n      let mfr = await new ModalFormData()\r\n        .title(\"实体清除-全局设置\")\r\n        .textField(\"实体清除机器人名字\", \"输入名字\", data.settings.entity_clear.sender)\r\n        .toggle(\"启用实体清除\", data.settings.entity_clear.enable)\r\n        .show(player);\r\n      if (mfr.canceled || mfr.formValues == undefined) return false;\r\n      if (mfr.formValues[0].trim() == \"\") {\r\n        let msfr = await new MessageFormData()\r\n          .title(\"错误\")\r\n          .body(\"实体清除机器人名字不可为空\")\r\n          .button1(\"确定\")\r\n          .button2(\"退出\")\r\n          .show(player);\r\n        if (msfr.canceled || msfr.selection == 2) {\r\n          return false;\r\n        }\r\n        continue;\r\n      }\r\n      data.settings.entity_clear.sender = mfr.formValues[0].trim();\r\n      data.settings.entity_clear.enable = mfr.formValues[1];\r\n      saveData(\"@\" + player.name);\r\n      return false;\r\n    }\r\n  },\r\n  getLightBlock: async function (player, list_key) {\r\n    let mfr = await new ModalFormData()\r\n      .title(\"获取光明方块\")\r\n      .slider(\"亮度\", 0, 15, 1, 15)\r\n      .slider(\"数量\", 1, 64, 1, 64)\r\n      .show(player);\r\n    if (mfr.canceled || mfr.formValues == undefined) return false;\r\n    player.runCommandAsync(\"give @s light_block \" + mfr.formValues[1] + \" \" + mfr.formValues[0]);\r\n    return false;\r\n  },\r\n  checkIn: async function (player, list_key) {\r\n    let bCheckin = false;\r\n    if (data.players[player.name]) {\r\n      if (data.players[player.name].last_checkin == getDate()) {\r\n        bCheckin = true;\r\n      }\r\n    }\r\n    if (bCheckin) {\r\n      // 已经签到过了\r\n      let msgResponse = await new MessageFormData()\r\n        .title(\"提示\")\r\n        .body(\"§l你已经签到过了，明天再来吧！\")\r\n        .button1(\"返回上一级\")\r\n        .button2(\"退出菜单\")\r\n        .show(player);\r\n      if (msgResponse.canceled || msgResponse.selection == 1) {\r\n        return false;\r\n      }\r\n      return true;\r\n    } else {\r\n      // 未签到\r\n      data.players[player.name].last_checkin = getDate();\r\n      data.players[player.name].money += 10;\r\n      data.players[player.name].checkin_times += 1;\r\n      saveData(\"@\" + player.name);\r\n      tellMessage(\"§a§l系统\", \"§l§e\" + player.name + \" §r今日§l§a已签到§r！ (金币+§e10§r)\");\r\n      let msgResponse = await new MessageFormData()\r\n        .title(\"提示\")\r\n        .body(\r\n          \"§a§l签到成功!§r(金币§e+10§r)\\n\" +\r\n            \"\\n签到总天数: \" +\r\n            data.players[player.name].checkin_times +\r\n            \"\\n当前金币:  \" +\r\n            data.players[player.name].money\r\n        )\r\n        .button1(\"返回上一级\")\r\n        .button2(\"退出菜单\")\r\n        .show(player);\r\n      if (msgResponse.canceled || msgResponse.selection == 1) {\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  },\r\n  backup_add: async function (player, list_key) {\r\n    let resultBackup = {\r\n      path:\r\n        \"\" +\r\n        (() => {\r\n          let date = new Date();\r\n          date.setTime(date.getTime() + 28800000);\r\n          return (\r\n            date.getFullYear() * 100000000 +\r\n            (date.getMonth() + 1) * 1000000 +\r\n            date.getDate() * 10000 +\r\n            date.getHours() * 100 +\r\n            date.getMinutes()\r\n          );\r\n        })(),\r\n      append: \"\",\r\n      creater: player.name,\r\n      auto: false,\r\n    };\r\n    while (true) {\r\n      let mfr = await new ModalFormData()\r\n        .title(\"备份存档\")\r\n        .textField(\"备份名称(同时作为存档文件夹名称)\", \"输入备份名称\", resultBackup.path)\r\n        .textField(\"备注\", \"输入备注\", resultBackup.append)\r\n        .show(player);\r\n      if (mfr.canceled || mfr.formValues == undefined) return false;\r\n      if (mfr.formValues[0].trim() == \"\") {\r\n        let msfr = await new MessageFormData()\r\n          .title(\"错误\")\r\n          .body(\"备份名称不可为空\")\r\n          .button1(\"确定\")\r\n          .button2(\"退出\")\r\n          .show(player);\r\n        if (msfr.canceled || msfr.selection == 2) {\r\n          return false;\r\n        }\r\n        continue;\r\n      }\r\n      let path = mfr.formValues[0].trim();\r\n      if (\r\n        backupInfo.list.forEach((e: any) => {\r\n          return e.path == path;\r\n        })\r\n      ) {\r\n        let msfr = await new MessageFormData()\r\n          .title(\"错误\")\r\n          .body(\"备份名称重复\")\r\n          .button1(\"确定\")\r\n          .button2(\"退出\")\r\n          .show(player);\r\n        if (msfr.canceled || msfr.selection == 2) {\r\n          return false;\r\n        }\r\n        continue;\r\n      }\r\n      resultBackup.path = mfr.formValues[0];\r\n      resultBackup.append = mfr.formValues[1];\r\n\r\n      let msfr = await new MessageFormData()\r\n        .title(\"提示\")\r\n        .body(\"确定备份存档？\\n备份名称: \" + resultBackup.path + \"\\n备注: \" + resultBackup.append)\r\n        .button1(\"确定\")\r\n        .button2(\"退出\")\r\n        .show(player);\r\n      if (msfr.canceled || msfr.selection == 2) {\r\n        return false;\r\n      }\r\n      // 创建备份\r\n      let resultArray: (string | boolean)[] = await backup(resultBackup, \"@\" + player.nameTag);\r\n      reloadBackupInfo();\r\n      if (resultArray[0]) {\r\n        let msfr = await new MessageFormData()\r\n          .title(\"提示\")\r\n          .body(\"备份创建完成\")\r\n          .button1(\"确定\")\r\n          .button2(\"退出\")\r\n          .show(player);\r\n        return false;\r\n      } else {\r\n        let msfr = await new MessageFormData()\r\n          .title(\"提示\")\r\n          .body(\"备份创建失败:\" + resultArray[1])\r\n          .button1(\"确定\")\r\n          .button2(\"退出\")\r\n          .show(player);\r\n        if (msfr.canceled || msfr.selection == 2) return false;\r\n        continue;\r\n      }\r\n      // break;\r\n    } // while\r\n  },\r\n  backup_list: async function (player, list_key) {\r\n    async function editBackupInfo(\r\n      info: BackupInfoType = {\r\n        path:\r\n          \"\" +\r\n          (() => {\r\n            let date = new Date();\r\n            date.setTime(date.getTime() + 28800000);\r\n            return (\r\n              date.getFullYear() * 100000000 +\r\n              (date.getMonth() + 1) * 1000000 +\r\n              date.getDate() * 10000 +\r\n              date.getHours() * 100 +\r\n              date.getMinutes()\r\n            );\r\n          })(),\r\n        append: \"\",\r\n        creater: player.name,\r\n        auto: false,\r\n      }\r\n    ): Promise<BackupInfoType | undefined> {\r\n      let resultInfo: BackupInfoType = {\r\n        ...info,\r\n      };\r\n      while (true) {\r\n        let mfr = await new ModalFormData()\r\n          .title(\"备份存档\")\r\n          .textField(\"备份名称(同时作为存档文件夹名称)\", \"输入备份名称\", info.path)\r\n          .textField(\"备注\", \"输入备注\", info.append)\r\n          .show(player);\r\n        if (mfr.canceled || mfr.formValues == undefined) return undefined;\r\n        if (mfr.formValues[0].trim() == \"\") {\r\n          let msfr = await new MessageFormData()\r\n            .title(\"错误\")\r\n            .body(\"备份名称不可为空\")\r\n            .button1(\"确定\")\r\n            .button2(\"退出\")\r\n            .show(player);\r\n          if (msfr.canceled || msfr.selection == 2) {\r\n            return undefined;\r\n          }\r\n          continue;\r\n        }\r\n        let path = mfr.formValues[0].trim();\r\n        if (\r\n          backupInfo.list.forEach((e: any) => {\r\n            return e.path == path;\r\n          })\r\n        ) {\r\n          let msfr = await new MessageFormData()\r\n            .title(\"错误\")\r\n            .body(\"备份名称重复\")\r\n            .button1(\"确定\")\r\n            .button2(\"退出\")\r\n            .show(player);\r\n          if (msfr.canceled || msfr.selection == 2) {\r\n            return undefined;\r\n          }\r\n          continue;\r\n        }\r\n        resultInfo.path = mfr.formValues[0].trim();\r\n        resultInfo.append = mfr.formValues[1];\r\n        return resultInfo;\r\n        // let msfr = await new MessageFormData()\r\n        //   .title(\"警告\")\r\n        //   .body(\"确定备份存档？\\n备份名称: \" + resultInfo.path + \"\\n备注: \" + resultInfo.append)\r\n        //   .button1(\"确定\")\r\n        //   .button2(\"退出\")\r\n        //   .show(player);\r\n        // if (msfr.canceled || msfr.selection == 2) {\r\n        //   return undefined;\r\n        // }\r\n\r\n        // break;\r\n      } // while\r\n    }\r\n    async function chooseBackupInfo(): Promise<number | undefined> {\r\n      let length = backupInfo.list.length;\r\n      let afd = new ActionFormData().title(\"备份列表\").body(\"选择一个备份\");\r\n      if (length == 0) {\r\n        afd = afd.button(\"(列表为空)\");\r\n      } else {\r\n        for (let i = 0; i < length; ++i) {\r\n          let date = new Date(backupInfo.list[i].utc);\r\n          date.setTime(date.getTime() + 28800000);\r\n          let createDate =\r\n            \"\" +\r\n            date.getFullYear() +\r\n            \"/\" +\r\n            (date.getMonth() + 1) +\r\n            \"/\" +\r\n            date.getDate() +\r\n            \" \" +\r\n            date.getHours() +\r\n            \":\" +\r\n            (date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes());\r\n\r\n          afd = afd.button(\r\n            \"§l\" +\r\n              backupInfo.list[i].path +\r\n              \"§r\" +\r\n              (backupInfo.list[i].auto ? \"(自动备份)\" : \"\") +\r\n              \"\\n\" +\r\n              \"§o@\" +\r\n              backupInfo.list[i].creater +\r\n              \"  \" +\r\n              createDate\r\n          );\r\n        } // for\r\n        let afr = await afd.show(player);\r\n        if (length == 0 || afr.canceled || afr.selection == undefined) {\r\n          return undefined;\r\n        }\r\n        return afr.selection;\r\n      }\r\n    }\r\n\r\n    while (true) {\r\n      // 选择\r\n      let targetInfo = await chooseBackupInfo();\r\n      if (targetInfo == undefined) return false;\r\n      // 查看 选择操作\r\n      let date = new Date(backupInfo.list[targetInfo].utc);\r\n      date.setTime(date.getTime() + 28800000);\r\n      let createDate =\r\n        \"\" +\r\n        date.getFullYear() +\r\n        \"年\" +\r\n        (date.getMonth() + 1) +\r\n        \"月\" +\r\n        date.getDate() +\r\n        \"日 §l\" +\r\n        date.getHours() +\r\n        \":\" +\r\n        (date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes()) +\r\n        \"§r\";\r\n      let afr = await new ActionFormData()\r\n        .title(\"备份详细\")\r\n        .body(\r\n          \"备份名称(路径): \" +\r\n            backupInfo.list[targetInfo].path +\r\n            \"\\n备份创建者: \" +\r\n            backupInfo.list[targetInfo].creater +\r\n            \"\\n自动创建: \" +\r\n            (backupInfo.list[targetInfo].auto ? \"是\" : \"否\") +\r\n            \"\\n备份创建时间: \" +\r\n            createDate +\r\n            \"\\n备份大小: \" +\r\n            (backupInfo.list[targetInfo].size / 1024 / 1024).toFixed(2) +\r\n            \" MB\" +\r\n            \"\\n备注: \" +\r\n            backupInfo.list[targetInfo].append\r\n        )\r\n        .button(\"立即回档\")\r\n        .button(\"删除备份\")\r\n        .show(player);\r\n      if (afr.canceled || afr.selection == undefined) continue;\r\n      switch (afr.selection) {\r\n        // case 0: // 编辑信息\r\n        //   {\r\n        //     let resultInfo = await editBackupInfo({\r\n        //       path: backupInfo.list[targetInfo].path,\r\n        //       creater: backupInfo.list[targetInfo].creater,\r\n        //       append: backupInfo.list[targetInfo].append,\r\n        //       auto: backupInfo.list[targetInfo].auto,\r\n        //     });\r\n        //     if (resultInfo == undefined) continue;\r\n        //     backupInfo.list[targetInfo].path = resultInfo.path;\r\n        //     backupInfo.list[targetInfo].append = resultInfo.append;\r\n        //     saveBackupInfo();\r\n        //     // reloadBackupInfo();\r\n        //     return false;\r\n        //   }\r\n        //   break;\r\n        case 0: // 立即回档\r\n          {\r\n            let mdr = await new ModalFormData().title(\"立即回档\").textField(\"回档原因\", \"请输入回档原因\").show(player);\r\n            if (mdr.canceled || mdr.formValues == undefined) {\r\n              continue;\r\n            }\r\n            let callback = async (e: (string | boolean)[]) => {\r\n              if (e[0]) {\r\n                // 成功\r\n                tellMessage(\r\n                  \"§b§l系统\",\r\n                  \"由 §e§l@\" +\r\n                    player.name +\r\n                    \" §r发起的回档请求已被接收\\n§a目标备份名称: §r\" +\r\n                    backupInfo.list[targetInfo ?? \"\"].path +\r\n                    \"\\n§a§l目标备份备注: §r\" +\r\n                    backupInfo.list[targetInfo ?? \"\"].append +\r\n                    \"\\n§a§l目标备份创建者: §r\" +\r\n                    backupInfo.list[targetInfo ?? \"\"].creater +\r\n                    \"\\n§a§l目标备份创建时间: §r\" +\r\n                    createDate +\r\n                    \"\\n§a§l回档原因: \" +\r\n                    (mdr.formValues == undefined ? \"无\" : mdr.formValues[0])\r\n                );\r\n                tellMessage(\"§b§l系统\", \"服务器将在 §e§l10秒§r 后§c§l自动关闭§r，并在回档完成后§a§l自动重启§r！\");\r\n                let msfr = await new MessageFormData()\r\n                  .title(\"提示\")\r\n                  .body(\"回档请求成功: \" + e[1] + \"\\n将在十秒后自动关闭游戏服务端，并在回档完成后重新启动。\")\r\n                  .button1(\"确定\")\r\n                  .button2(\"退出\")\r\n                  .show(player);\r\n              } else {\r\n                let msfr = await new MessageFormData()\r\n                  .title(\"错误\")\r\n                  .body(\"回档请求失败: \" + e[1])\r\n                  .button1(\"确定\")\r\n                  .button2(\"退出\")\r\n                  .show(player);\r\n              }\r\n            };\r\n            callback(\r\n              await restore(backupInfo.list[targetInfo].path, \"@\" + player.name + \" Result: \" + mdr.formValues[0])\r\n            );\r\n            return true;\r\n          }\r\n          break;\r\n        case 1: // 删除备份\r\n          {\r\n            let msfr = await new MessageFormData()\r\n              .title(\"提示\")\r\n              .body(\"确定要删除此备份？\")\r\n              .button1(\"确定\")\r\n              .button2(\"退出\")\r\n              .show(player);\r\n            if (msfr.canceled || msfr.selection == undefined || msfr.selection == 2) {\r\n              continue;\r\n            }\r\n            // 删除操作\r\n            let resultArray = await delBackup(backupInfo.list[targetInfo].path, \"@\" + player.name);\r\n            reloadBackupInfo();\r\n            if (resultArray[0]) {\r\n              let msfr = await new MessageFormData()\r\n                .title(\"提示\")\r\n                .body(\"备份删除完成\")\r\n                .button1(\"确定\")\r\n                .button2(\"退出\")\r\n                .show(player);\r\n              if (msfr.canceled || msfr.selection == 2) return false;\r\n              continue;\r\n            } else {\r\n              let msfr = await new MessageFormData()\r\n                .title(\"提示\")\r\n                .body(\"备份删除失败:\" + resultArray[1])\r\n                .button1(\"确定\")\r\n                .button2(\"退出\")\r\n                .show(player);\r\n              if (msfr.canceled || msfr.selection == 2) return false;\r\n              continue;\r\n            }\r\n          }\r\n          break;\r\n      } // switch\r\n    } // while\r\n  },\r\n  backup_settings: async function (player, list_key) {\r\n    while (true) {\r\n      let mdr = await new ModalFormData()\r\n        .title(\"备份设置\")\r\n        .toggle(\"自动备份\", backupInfo.auto_backup)\r\n        .slider(\"自动备份\", 1, 72, 1, backupInfo);\r\n    }\r\n  },\r\n};\r\nconst strScripts: StrScriptList = {\r\n  test: async function (player, list_key) {\r\n    tellMessage(moduleName, \"Script Test.\");\r\n    return \"test\";\r\n  },\r\n  getUserBody: async function (player, list_key) {\r\n    let name = player.name;\r\n    if (data == undefined) return \"获取信息失败\";\r\n    let job = data.players[player.name]\r\n      ? data.players[player.name].job ?? data.settings.players.default_job\r\n      : data.settings.players.default_job;\r\n    let goodat = data.players[player.name]\r\n      ? data.players[player.name].goodat ?? data.settings.players.default_goodat\r\n      : data.settings.players.default_goodat;\r\n    let place = data.players[player.name]\r\n      ? data.players[player.name].place ?? data.settings.players.default_place\r\n      : data.settings.players.default_place;\r\n    let online_time = getPlayerScore(world.scoreboard.getObjective(\"time\"), player) ?? \"null\";\r\n    let money = data.players[player.name]\r\n      ? data.players[player.name].money ?? data.settings.players.default_money\r\n      : data.settings.players.default_money;\r\n    let checkin_times = data.players[player.name]\r\n      ? data.players[player.name].checkin_times ?? data.settings.players.default_checkin_times\r\n      : data.settings.players.default_checkin_times;\r\n    let bCheckin = false;\r\n    if (data.players[player.name]) {\r\n      if (data.players[player.name].last_checkin == getDate()) {\r\n        bCheckin = true;\r\n      }\r\n    }\r\n\r\n    return (\r\n      \"\\n§r§l玩家ID:             §r§e\" +\r\n      name +\r\n      \"\\n§r§l职业:               §r§e\" +\r\n      job +\r\n      \"\\n§r§l特长:               §r§e\" +\r\n      goodat +\r\n      \"\\n§r§l所在籍:             §r§e\" +\r\n      place +\r\n      \"\\n§r§l在线总时长:         §r§e\" +\r\n      online_time +\r\n      \" 分钟\" +\r\n      \"\\n§r§l金币:               §r§e\" +\r\n      money +\r\n      \"\\n§r§l签到总天数:         §r§e\" +\r\n      checkin_times +\r\n      \"\\n\\n§r§e\" +\r\n      (bCheckin ? \"今日已签到\" : \"今日未签到\")\r\n    );\r\n  },\r\n  getSweeperBody: async function (player, list_key) {\r\n    return (\r\n      \"§a§l欢迎使用扫地姬！§r\\n我们的职责是§e§l清理服务器的多余喵~！§r\\n扫地姬§b§l累计清理实体数§r: §l§r喵~\" +\r\n      data.settings.entity_clear.total_clear +\r\n      \"§r\\n请选择一个选项喵~：\"\r\n    );\r\n  },\r\n  getBackupBody: async function (player, list_key) {\r\n    let date = new Date(backupInfo.last_backup_utc);\r\n    date.setTime(date.getTime() + 28800000);\r\n\r\n    return (\r\n      \"欢迎来到备份管理\" +\r\n      \"\\n§r§l当前备份存档总数:       §r§e\" +\r\n      backupInfo.list.length +\r\n      \"\\n§r§l服务器磁盘已使用空间:   §r§e\" +\r\n      (backupInfo.disk.used_size / 1024 / 1024 / 1024).toFixed(2) +\r\n      \"GB / \" +\r\n      (backupInfo.disk.total_size / 1024 / 1024 / 1024).toFixed(2) +\r\n      \"GB\" +\r\n      \"\\n§r§l服务器磁盘剩余空间:     §r§e\" +\r\n      (backupInfo.disk.free_size / 1024 / 1024 / 1024).toFixed(2) +\r\n      \"GB\" +\r\n      \"\\n§r§l自动备份:               §r§e\" +\r\n      (backupInfo.auto_backup ? \"开启\" : \"关闭\") +\r\n      \"\\n§r§l上一次备份时间:         §r§e\" +\r\n      ((backupInfo.last_backup_utc ?? 0) == 0\r\n        ? \"从未备份\"\r\n        : date.getFullYear() +\r\n          \"年\" +\r\n          (date.getMonth() + 1) +\r\n          \"月\" +\r\n          date.getDate() +\r\n          \"日 §l\" +\r\n          date.getHours() +\r\n          \":\" +\r\n          (date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes()) +\r\n          \"§r\" +\r\n          (backupInfo.last_auto ? \"(自动备份)\" : \"\")) +\r\n      \"\\n\\n§r请选择一个选项\"\r\n    );\r\n  },\r\n};\r\nconst SpecialRoute: SpecialRouteType = {\r\n  BACK: \"#back\",\r\n  EXIT: \"#exit\",\r\n};\r\nconst runBeforeTp: RunBeforeTpType = {};\r\nfunction addRunBeforeTp(key: string, func: RunBeforeTpFuncType): boolean {\r\n  if (runBeforeTp[key]) return false;\r\n  runBeforeTp[key] = func;\r\n  return true;\r\n}\r\nasync function analyseSnowString(str: string, player: Player, list_key: string, index?: number) {\r\n  if (/^#script /.test(str)) {\r\n    let script_key = str.replace(/^#script /, \"\");\r\n    // 判断是否存在\r\n    if (script_key == undefined || script_key == \"\") {\r\n      throw new Error(\r\n        \"(Anaylse String) No Script Specified. @\" + player.name + \"\\nList Key: \" + list_key + \"\\nSelect Index: \" + index\r\n      );\r\n    }\r\n    let exist = false;\r\n    for (let key in strScripts) {\r\n      if (key == script_key) {\r\n        exist = true;\r\n        break;\r\n      }\r\n    }\r\n    if (exist == false)\r\n      throw new Error(\r\n        \"(Anaylse String) Script Not Exist. @\" + player.name + \"\\nList Key: \" + list_key + \"\\nSelect Index: \" + index\r\n      );\r\n    // 执行并获取结果\r\n    return strScripts[script_key](player, list_key);\r\n  }\r\n  return str;\r\n}\r\n/**\r\n * 显示雪球菜单的一个列表\r\n * @param player 执行主体玩家\r\n * @param list_key 列表的名称 对应json中snow下的键名\r\n * @returns 是否要退出菜单\r\n */\r\nasync function showSnowList(player: Player, list_key: string): Promise<boolean> {\r\n  // 判断data.snow是否存在\r\n  if (data.snow == undefined) {\r\n    throw new Error(\"Incorrect Data Format: [data.snow] Undefined.\");\r\n  }\r\n\r\n  // 判断菜单是否存在\r\n  let exist = false;\r\n  for (let key in data.snow) {\r\n    if (key == list_key) {\r\n      exist = true;\r\n      break;\r\n    }\r\n  }\r\n  if (exist == false) {\r\n    throw new Error(\"Snow List [\" + list_key + \"] not Exist\");\r\n  }\r\n  let timer = 0;\r\n  while (true) {\r\n    // 显示菜单\r\n    let actionFormData = new ActionFormData().title(data.snow[list_key].title);\r\n    if (data.snow[list_key].body != \"\") {\r\n      // Body 文字\r\n      actionFormData = actionFormData.body(await analyseSnowString(data.snow[list_key].body, player, list_key));\r\n    }\r\n    if (data.snow[list_key].show_back) {\r\n      // 返回按钮\r\n      actionFormData = actionFormData.button(\"返回上一级\");\r\n    }\r\n\r\n    // 主体按钮\r\n    let length = data.snow[list_key].list.length;\r\n    if (length == 0) {\r\n      actionFormData = actionFormData.button(\"(列表为空)\");\r\n    } else {\r\n      for (let i = 0; i < length; ++i) {\r\n        actionFormData = actionFormData.button(\r\n          await analyseSnowString(data.snow[list_key].list[i].name, player, list_key, i),\r\n          (data.snow[list_key].list[i].icon ?? \"\") != \"\"\r\n            ? \"textures/blocks/\" + data.snow[list_key].list[i].icon\r\n            : undefined\r\n        );\r\n      }\r\n    }\r\n\r\n    // 显示\r\n    let actionFormResponse = await actionFormData.show(player);\r\n\r\n    // 处理 Response\r\n    if (actionFormResponse.canceled || actionFormResponse.selection == undefined) {\r\n      return true;\r\n    }\r\n\r\n    if (data.snow[list_key].show_back && actionFormResponse.selection == 0) return false; // 返回上一级菜单\r\n    if (length > 0) {\r\n      let index = data.snow[list_key].show_back ? actionFormResponse.selection - 1 : actionFormResponse.selection;\r\n      // 判断权限\r\n      if (data.snow[list_key].list[index].tag != undefined && data.snow[list_key].list[index].tag.length > 0) {\r\n        if (\r\n          // 若玩家有其中的所有tag 就会返回undefined\r\n          data.snow[list_key].list[index].tag.find((tag: string) => {\r\n            return !player.hasTag(tag);\r\n          }) != undefined\r\n        ) {\r\n          // 存在任意tag不被玩家所拥有\r\n          let msfrNoTag = await new MessageFormData()\r\n            .title(\"提示\")\r\n            .body(\"暂未获得使用该选项的权限\\n如有疑问请联系管理员\")\r\n            .button1(\"确定\")\r\n            .button2(\"退出菜单\")\r\n            .show(player);\r\n          if (msfrNoTag.canceled || msfrNoTag.selection == 2) {\r\n            return true; // 退出菜单\r\n          }\r\n          break; // 确定\r\n        }\r\n      }\r\n      switch (data.snow[list_key].list[index].type) {\r\n        case \"tp\":\r\n          {\r\n            // 运行前置函数\r\n            for (let key in runBeforeTp) {\r\n              let result = await runBeforeTp[key](player, list_key);\r\n              // tellMessage(moduleName, \"cancel: \" + result.cancel + \" reason: \" + (result.cancelReason ?? \"无\"));\r\n              if (result.cancel) {\r\n                // let msfr = await new MessageFormData()\r\n                //   .title(\"提示\")\r\n                //   .body(\"传送失败\\n原因:\" + (result.cancelReason ?? \"未知\"))\r\n                //   .button1(\"确定\")\r\n                //   .button2(\"退出\")\r\n                //   .show(player);\r\n                // if (msfr.selection == 1 || msfr.canceled) return false;\r\n                // if (msfr.selection == 2) return true;\r\n                return false;\r\n              }\r\n            }\r\n            // 传送\r\n            player.teleport(\r\n              data.snow[list_key].list[index].location,\r\n              world.getDimension(data.snow[list_key].list[index].dimension),\r\n              0,\r\n              0\r\n            );\r\n            // 显示\r\n            if (data.snow[list_key].list[index].show) {\r\n              tellMessage(\r\n                senderName,\r\n                \"§e§l\" +\r\n                  player.name +\r\n                  \" §r传送到了 §a§l\" +\r\n                  (data.snow[list_key].list[index].show_name ?? data.snow[list_key].list[index].name)\r\n              );\r\n            }\r\n            // 播放声音\r\n            player.playSound(\"random.levelup\", { volume: 100000 });\r\n            // 提示并退出\r\n            player.runCommandAsync(\"title @s actionbar §a§l传送完成\");\r\n            return true;\r\n          }\r\n          break;\r\n        case \"commands\":\r\n          {\r\n            // 执行命令\r\n            data.snow[list_key].list[index].commands.forEach((command: string) => {\r\n              player.runCommandAsync(command);\r\n            });\r\n            // 退出\r\n            if (data.snow[list_key].list[index].close) {\r\n              return true;\r\n            }\r\n          }\r\n          break;\r\n        case \"function\":\r\n          {\r\n            // TODO\r\n          }\r\n          break;\r\n        case \"script\":\r\n          {\r\n            let targetScriptKey = data.snow[list_key].list[index].script;\r\n            if (targetScriptKey == undefined || targetScriptKey == \"\") {\r\n              throw new Error(\r\n                \"No Script Specified. @\" + player.name + \"\\nList Key: \" + list_key + \"\\nSelect Index: \" + index\r\n              );\r\n            }\r\n            // 判断是否存在\r\n            let exist = false;\r\n            for (let key in snowScripts) {\r\n              if (key == targetScriptKey) {\r\n                exist = true;\r\n                break;\r\n              }\r\n            }\r\n            if (exist == false)\r\n              throw new Error(\r\n                \"Script Not Exist. @\" + player.name + \"\\nList Key: \" + list_key + \"\\nSelect Index: \" + index\r\n              );\r\n            // 执行脚本\r\n            let quit = true;\r\n            try {\r\n              quit = await snowScripts[targetScriptKey](player, list_key);\r\n            } catch (e) {\r\n              // 标记错误后重新抛出\r\n              tellErrorMessage(moduleName, \"Error in Script §o§l\" + targetScriptKey);\r\n              throw e;\r\n            }\r\n            // 退出菜单\r\n            if (quit) {\r\n              return true;\r\n            }\r\n          }\r\n          break;\r\n        case \"route\":\r\n          {\r\n            let destination = data.snow[list_key].list[index].destination;\r\n            // 若没有给定 Destination\r\n            if (destination == \"\" || destination == undefined) {\r\n              throw new Error(\r\n                \"(Route) No Destination Specified. @\" +\r\n                  player.name +\r\n                  \"\\nList Key: \" +\r\n                  list_key +\r\n                  \"\\nSelect Index: \" +\r\n                  index\r\n              );\r\n            }\r\n            // 判断是否为特殊跳转选项\r\n            for (let key in SpecialRoute) {\r\n              if (destination == SpecialRoute[key]) {\r\n                switch (key) {\r\n                  case \"BACK\":\r\n                    return false;\r\n                  case \"EXIT\":\r\n                    return true;\r\n                  default:\r\n                    throw new Error(\"Unable to Deal with SpecialRoute.\" + key);\r\n                }\r\n              }\r\n            }\r\n            // 跳转执行\r\n            if ((await showSnowList(player, destination)) == true) return true;\r\n          }\r\n          break;\r\n        default:\r\n          throw new Error(\r\n            \"Snow Item Error! \\nList Key: \" +\r\n              list_key +\r\n              \"\\nSelect Index: \" +\r\n              index +\r\n              \"\\nItem JSON: \" +\r\n              JSON.stringify(data.snow[list_key].list[index] ?? \"ITEM_UNDEFINED\")\r\n          );\r\n      }\r\n    }\r\n  }\r\n  return true;\r\n}\r\nasync function showSnowMenu(player: Player, entry_list_key?: string) {\r\n  try {\r\n    await showSnowList(player, entry_list_key ?? data.snow_main);\r\n  } catch (e) {\r\n    anaylseError(moduleName, e, \"Error In [showSnowMenuNew]\");\r\n  }\r\n}\r\nfunction initCuberSnow() {\r\n  // world.events.beforeChat.subscribe((e) => {\r\n  //   if (e.message == \"#\") {\r\n  //     e.cancel = true;\r\n  //     showSnowMenuNew(e.sender);\r\n  //   }\r\n  // });\r\n  world.events.beforeItemUse.subscribe(async (e) => {\r\n    if (e.item.typeId != \"minecraft:snowball\" || e.source.typeId != \"minecraft:player\") return;\r\n    if (!e.source.hasTag(data.settings.new_player.limit_tag)) {\r\n      if (!data.settings.new_player.allow_snow) {\r\n        let msfr = await new MessageFormData()\r\n          .title(\"错误\")\r\n          .body(\"未获得使用雪球菜单的权限\\n如有疑问请联系管理员\")\r\n          .button1(\"确定\")\r\n          .button2(\"退出\")\r\n          .show(e.source as Player);\r\n        return;\r\n      }\r\n      if (data.settings.new_player.guest_snow) {\r\n        e.source.runCommandAsync(\"kill @e[type=snowball, c=1]\");\r\n        showSnowMenu(e.source as Player, \"newPlayer_home\");\r\n        return;\r\n      }\r\n    }\r\n    e.source.runCommandAsync(\"kill @e[type=snowball, c=1]\");\r\n    showSnowMenu(e.source as Player);\r\n  });\r\n  world.events.beforeChat.subscribe((e) => {\r\n    if (e.message.startsWith(\"#签到\") || e.message.startsWith(\"#checkin\")) {\r\n      let bCheckin = false;\r\n      if (data.players[e.sender.name]) {\r\n        if (data.players[e.sender.name].last_checkin == getDate()) {\r\n          bCheckin = true;\r\n        }\r\n      }\r\n      if (bCheckin) {\r\n        // 已经签到过了\r\n        tellMessage(\"§b§l提示\", \"§e@\" + e.sender.name + \" §r你已经签到过了，明天再来吧！\");\r\n      } else {\r\n        // 未签到\r\n        data.players[e.sender.name].last_checkin = getDate();\r\n        data.players[e.sender.name].money += 10;\r\n        data.players[e.sender.name].checkin_times += 1;\r\n        saveData(\"@\" + e.sender.name);\r\n        tellMessage(\"§a§l系统\", \"§l§e\" + e.sender.name + \" §r今日§l§a已签到§r！ (金币+§e10§r)\");\r\n      }\r\n    }\r\n  });\r\n  return { moduleName, moduleVersion };\r\n}\r\nexport { initCuberSnow, showSnowMenu, addRunBeforeTp };\r\n"],"sourceRoot":"../../../scripts/"}